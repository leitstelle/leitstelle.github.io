<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: software | Leitstelle]]></title>
  <link href="http://leitstelle.github.io/blog/categories/software/atom.xml" rel="self"/>
  <link href="http://leitstelle.github.io/"/>
  <updated>2014-08-10T22:06:59+02:00</updated>
  <id>http://leitstelle.github.io/</id>
  <author>
    <name><![CDATA[Frank Zisko]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[GitLab]]></title>
    <link href="http://leitstelle.github.io/blog/2014/2014-08-07-gitlab/"/>
    <updated>2014-08-07T13:14:00+02:00</updated>
    <id>http://leitstelle.github.io/blog/2014/gitlab</id>
    <content type="html"><![CDATA[<h2>About</h2>

<p>Installation of Gitlab on an Uberspace account.</p>

<h2>tl;dr</h2>

<p>Use the (Fire-And-Forget) FAF-Script. But caution: This script expect a not configured setup. In case of doubt this will add a new config to an existing one (just Python and Ruby), unconfigure your system (just Python and Ruby), or burn your existing database (just Gitlab) &hellip;. but nothing more.</p>

<p>Read the script bevor you run it, please! (Or run it on an empty account. â˜º )</p>

<h3>Gitlab with Uberspace Ruby</h3>

<pre><code>wget -O ${HOME}/gitlab-install.sh https://leitstelle.github.io/downloads/code/2014/gitlab-install.sh
cd ${HOME}
chmod u+x gitlab-install.sh
./gitlab-install.sh
</code></pre>

<h3>Gitlab with rbenv Ruby</h3>

<pre><code>wget -O ${HOME}/gitlab-install-with-rbenv.sh https://leitstelle.github.io/downloads/code/2014/gitlab-install-with-rbenv.sh
cd ${HOME}
chmod u+x gitlab-install-with-rbenv.sh
./gitlab-install-with-rbenv.sh
</code></pre>

<h2>Info</h2>

<pre><code>Uberspace-Username       -&gt; ${USER}, &lt;ubername&gt; or user
Uberspace-Severname      -&gt; $(hostname -a), &lt;uberhost&gt;, &lt;hostname&gt; or host
~/workspace/$projectname -&gt; Space for projects. (gitlab, gitlab-shell, gitlab-satellites)
~/workspace/repositories -&gt; Git repo directory.
</code></pre>

<h2>Installation</h2>

<!--<figure class='code'><figcaption><span> (gitlab-install.sh)</span> <a href='/downloads/code/2014/gitlab-install.sh'>download</a></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
<span class='line-number'>164</span>
<span class='line-number'>165</span>
<span class='line-number'>166</span>
<span class='line-number'>167</span>
<span class='line-number'>168</span>
<span class='line-number'>169</span>
<span class='line-number'>170</span>
<span class='line-number'>171</span>
<span class='line-number'>172</span>
<span class='line-number'>173</span>
<span class='line-number'>174</span>
<span class='line-number'>175</span>
<span class='line-number'>176</span>
<span class='line-number'>177</span>
<span class='line-number'>178</span>
<span class='line-number'>179</span>
<span class='line-number'>180</span>
<span class='line-number'>181</span>
<span class='line-number'>182</span>
<span class='line-number'>183</span>
<span class='line-number'>184</span>
<span class='line-number'>185</span>
<span class='line-number'>186</span>
<span class='line-number'>187</span>
<span class='line-number'>188</span>
<span class='line-number'>189</span>
<span class='line-number'>190</span>
<span class='line-number'>191</span>
<span class='line-number'>192</span>
<span class='line-number'>193</span>
<span class='line-number'>194</span>
<span class='line-number'>195</span>
<span class='line-number'>196</span>
<span class='line-number'>197</span>
<span class='line-number'>198</span>
<span class='line-number'>199</span>
<span class='line-number'>200</span>
<span class='line-number'>201</span>
<span class='line-number'>202</span>
<span class='line-number'>203</span>
<span class='line-number'>204</span>
<span class='line-number'>205</span>
<span class='line-number'>206</span>
<span class='line-number'>207</span>
<span class='line-number'>208</span>
<span class='line-number'>209</span>
<span class='line-number'>210</span>
<span class='line-number'>211</span>
<span class='line-number'>212</span>
<span class='line-number'>213</span>
<span class='line-number'>214</span>
<span class='line-number'>215</span>
<span class='line-number'>216</span>
<span class='line-number'>217</span>
<span class='line-number'>218</span>
<span class='line-number'>219</span>
<span class='line-number'>220</span>
<span class='line-number'>221</span>
<span class='line-number'>222</span>
<span class='line-number'>223</span>
<span class='line-number'>224</span>
<span class='line-number'>225</span>
<span class='line-number'>226</span>
<span class='line-number'>227</span>
<span class='line-number'>228</span>
<span class='line-number'>229</span>
<span class='line-number'>230</span>
<span class='line-number'>231</span>
<span class='line-number'>232</span>
<span class='line-number'>233</span>
<span class='line-number'>234</span>
<span class='line-number'>235</span>
<span class='line-number'>236</span>
<span class='line-number'>237</span>
<span class='line-number'>238</span>
<span class='line-number'>239</span>
<span class='line-number'>240</span>
<span class='line-number'>241</span>
<span class='line-number'>242</span>
<span class='line-number'>243</span>
<span class='line-number'>244</span>
<span class='line-number'>245</span>
<span class='line-number'>246</span>
<span class='line-number'>247</span>
<span class='line-number'>248</span>
<span class='line-number'>249</span>
<span class='line-number'>250</span>
<span class='line-number'>251</span>
<span class='line-number'>252</span>
<span class='line-number'>253</span>
<span class='line-number'>254</span>
<span class='line-number'>255</span>
<span class='line-number'>256</span>
<span class='line-number'>257</span>
<span class='line-number'>258</span>
<span class='line-number'>259</span>
<span class='line-number'>260</span>
<span class='line-number'>261</span>
<span class='line-number'>262</span>
<span class='line-number'>263</span>
<span class='line-number'>264</span>
<span class='line-number'>265</span>
<span class='line-number'>266</span>
<span class='line-number'>267</span>
<span class='line-number'>268</span>
<span class='line-number'>269</span>
<span class='line-number'>270</span>
<span class='line-number'>271</span>
<span class='line-number'>272</span>
<span class='line-number'>273</span>
<span class='line-number'>274</span>
<span class='line-number'>275</span>
<span class='line-number'>276</span>
<span class='line-number'>277</span>
<span class='line-number'>278</span>
<span class='line-number'>279</span>
<span class='line-number'>280</span>
<span class='line-number'>281</span>
<span class='line-number'>282</span>
<span class='line-number'>283</span>
<span class='line-number'>284</span>
<span class='line-number'>285</span>
<span class='line-number'>286</span>
<span class='line-number'>287</span>
<span class='line-number'>288</span>
<span class='line-number'>289</span>
<span class='line-number'>290</span>
<span class='line-number'>291</span>
<span class='line-number'>292</span>
<span class='line-number'>293</span>
<span class='line-number'>294</span>
<span class='line-number'>295</span>
<span class='line-number'>296</span>
<span class='line-number'>297</span>
<span class='line-number'>298</span>
<span class='line-number'>299</span>
<span class='line-number'>300</span>
<span class='line-number'>301</span>
<span class='line-number'>302</span>
<span class='line-number'>303</span>
<span class='line-number'>304</span>
<span class='line-number'>305</span>
<span class='line-number'>306</span>
<span class='line-number'>307</span>
<span class='line-number'>308</span>
<span class='line-number'>309</span>
<span class='line-number'>310</span>
<span class='line-number'>311</span>
<span class='line-number'>312</span>
<span class='line-number'>313</span>
<span class='line-number'>314</span>
<span class='line-number'>315</span>
<span class='line-number'>316</span>
<span class='line-number'>317</span>
<span class='line-number'>318</span>
<span class='line-number'>319</span>
<span class='line-number'>320</span>
<span class='line-number'>321</span>
<span class='line-number'>322</span>
<span class='line-number'>323</span>
<span class='line-number'>324</span>
<span class='line-number'>325</span>
<span class='line-number'>326</span>
<span class='line-number'>327</span>
<span class='line-number'>328</span>
<span class='line-number'>329</span>
<span class='line-number'>330</span>
<span class='line-number'>331</span>
<span class='line-number'>332</span>
<span class='line-number'>333</span>
<span class='line-number'>334</span>
<span class='line-number'>335</span>
<span class='line-number'>336</span>
<span class='line-number'>337</span>
<span class='line-number'>338</span>
<span class='line-number'>339</span>
<span class='line-number'>340</span>
<span class='line-number'>341</span>
<span class='line-number'>342</span>
<span class='line-number'>343</span>
<span class='line-number'>344</span>
<span class='line-number'>345</span>
<span class='line-number'>346</span>
<span class='line-number'>347</span>
<span class='line-number'>348</span>
<span class='line-number'>349</span>
<span class='line-number'>350</span>
<span class='line-number'>351</span>
<span class='line-number'>352</span>
<span class='line-number'>353</span>
<span class='line-number'>354</span>
<span class='line-number'>355</span>
<span class='line-number'>356</span>
<span class='line-number'>357</span>
<span class='line-number'>358</span>
<span class='line-number'>359</span>
<span class='line-number'>360</span>
<span class='line-number'>361</span>
<span class='line-number'>362</span>
<span class='line-number'>363</span>
<span class='line-number'>364</span>
<span class='line-number'>365</span>
<span class='line-number'>366</span>
<span class='line-number'>367</span>
<span class='line-number'>368</span>
<span class='line-number'>369</span>
<span class='line-number'>370</span>
<span class='line-number'>371</span>
<span class='line-number'>372</span>
<span class='line-number'>373</span>
<span class='line-number'>374</span>
<span class='line-number'>375</span>
<span class='line-number'>376</span>
<span class='line-number'>377</span>
<span class='line-number'>378</span>
<span class='line-number'>379</span>
<span class='line-number'>380</span>
<span class='line-number'>381</span>
<span class='line-number'>382</span>
<span class='line-number'>383</span>
<span class='line-number'>384</span>
<span class='line-number'>385</span>
<span class='line-number'>386</span>
<span class='line-number'>387</span>
<span class='line-number'>388</span>
<span class='line-number'>389</span>
<span class='line-number'>390</span>
<span class='line-number'>391</span>
<span class='line-number'>392</span>
<span class='line-number'>393</span>
<span class='line-number'>394</span>
<span class='line-number'>395</span>
<span class='line-number'>396</span>
<span class='line-number'>397</span>
<span class='line-number'>398</span>
<span class='line-number'>399</span>
<span class='line-number'>400</span>
<span class='line-number'>401</span>
<span class='line-number'>402</span>
<span class='line-number'>403</span>
<span class='line-number'>404</span>
<span class='line-number'>405</span>
<span class='line-number'>406</span>
<span class='line-number'>407</span>
<span class='line-number'>408</span>
<span class='line-number'>409</span>
<span class='line-number'>410</span>
<span class='line-number'>411</span>
<span class='line-number'>412</span>
<span class='line-number'>413</span>
<span class='line-number'>414</span>
<span class='line-number'>415</span>
<span class='line-number'>416</span>
<span class='line-number'>417</span>
<span class='line-number'>418</span>
<span class='line-number'>419</span>
<span class='line-number'>420</span>
<span class='line-number'>421</span>
<span class='line-number'>422</span>
<span class='line-number'>423</span>
<span class='line-number'>424</span>
<span class='line-number'>425</span>
<span class='line-number'>426</span>
<span class='line-number'>427</span>
<span class='line-number'>428</span>
<span class='line-number'>429</span>
<span class='line-number'>430</span>
<span class='line-number'>431</span>
<span class='line-number'>432</span>
<span class='line-number'>433</span>
<span class='line-number'>434</span>
<span class='line-number'>435</span>
<span class='line-number'>436</span>
<span class='line-number'>437</span>
<span class='line-number'>438</span>
<span class='line-number'>439</span>
<span class='line-number'>440</span>
<span class='line-number'>441</span>
<span class='line-number'>442</span>
<span class='line-number'>443</span>
<span class='line-number'>444</span>
<span class='line-number'>445</span>
<span class='line-number'>446</span>
<span class='line-number'>447</span>
<span class='line-number'>448</span>
<span class='line-number'>449</span>
<span class='line-number'>450</span>
<span class='line-number'>451</span>
<span class='line-number'>452</span>
<span class='line-number'>453</span>
<span class='line-number'>454</span>
<span class='line-number'>455</span>
<span class='line-number'>456</span>
<span class='line-number'>457</span>
<span class='line-number'>458</span>
<span class='line-number'>459</span>
<span class='line-number'>460</span>
<span class='line-number'>461</span>
<span class='line-number'>462</span>
<span class='line-number'>463</span>
<span class='line-number'>464</span>
<span class='line-number'>465</span>
<span class='line-number'>466</span>
<span class='line-number'>467</span>
<span class='line-number'>468</span>
<span class='line-number'>469</span>
<span class='line-number'>470</span>
<span class='line-number'>471</span>
<span class='line-number'>472</span>
<span class='line-number'>473</span>
<span class='line-number'>474</span>
<span class='line-number'>475</span>
<span class='line-number'>476</span>
<span class='line-number'>477</span>
<span class='line-number'>478</span>
<span class='line-number'>479</span>
<span class='line-number'>480</span>
<span class='line-number'>481</span>
<span class='line-number'>482</span>
<span class='line-number'>483</span>
<span class='line-number'>484</span>
<span class='line-number'>485</span>
<span class='line-number'>486</span>
<span class='line-number'>487</span>
<span class='line-number'>488</span>
<span class='line-number'>489</span>
<span class='line-number'>490</span>
<span class='line-number'>491</span>
<span class='line-number'>492</span>
<span class='line-number'>493</span>
<span class='line-number'>494</span>
<span class='line-number'>495</span>
<span class='line-number'>496</span>
<span class='line-number'>497</span>
<span class='line-number'>498</span>
<span class='line-number'>499</span>
<span class='line-number'>500</span>
<span class='line-number'>501</span>
<span class='line-number'>502</span>
<span class='line-number'>503</span>
<span class='line-number'>504</span>
<span class='line-number'>505</span>
<span class='line-number'>506</span>
<span class='line-number'>507</span>
<span class='line-number'>508</span>
<span class='line-number'>509</span>
<span class='line-number'>510</span>
<span class='line-number'>511</span>
<span class='line-number'>512</span>
<span class='line-number'>513</span>
<span class='line-number'>514</span>
<span class='line-number'>515</span>
<span class='line-number'>516</span>
<span class='line-number'>517</span>
<span class='line-number'>518</span>
<span class='line-number'>519</span>
<span class='line-number'>520</span>
<span class='line-number'>521</span>
<span class='line-number'>522</span>
<span class='line-number'>523</span>
<span class='line-number'>524</span>
<span class='line-number'>525</span>
<span class='line-number'>526</span>
<span class='line-number'>527</span>
<span class='line-number'>528</span>
<span class='line-number'>529</span>
<span class='line-number'>530</span>
<span class='line-number'>531</span>
<span class='line-number'>532</span>
<span class='line-number'>533</span>
<span class='line-number'>534</span>
<span class='line-number'>535</span>
<span class='line-number'>536</span>
<span class='line-number'>537</span>
<span class='line-number'>538</span>
<span class='line-number'>539</span>
<span class='line-number'>540</span>
<span class='line-number'>541</span>
<span class='line-number'>542</span>
<span class='line-number'>543</span>
<span class='line-number'>544</span>
<span class='line-number'>545</span>
<span class='line-number'>546</span>
<span class='line-number'>547</span>
<span class='line-number'>548</span>
<span class='line-number'>549</span>
<span class='line-number'>550</span>
<span class='line-number'>551</span>
<span class='line-number'>552</span>
<span class='line-number'>553</span>
<span class='line-number'>554</span>
<span class='line-number'>555</span>
<span class='line-number'>556</span>
<span class='line-number'>557</span>
<span class='line-number'>558</span>
<span class='line-number'>559</span>
<span class='line-number'>560</span>
<span class='line-number'>561</span>
<span class='line-number'>562</span>
<span class='line-number'>563</span>
<span class='line-number'>564</span>
<span class='line-number'>565</span>
<span class='line-number'>566</span>
<span class='line-number'>567</span>
<span class='line-number'>568</span>
<span class='line-number'>569</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c">#!/usr/bin/env bash</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Init. Use it: pause &#39;Press [Enter] key to continue...&#39;</span>
</span><span class='line'><span class="k">function</span> pause<span class="o">(){</span>
</span><span class='line'>   <span class="nb">read</span> -p <span class="s2">&quot;$*&quot;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="c">#DOMAINNAME=&quot;gitlab.${USER}.$(hostname -a).uberspace.de&quot;</span>
</span><span class='line'><span class="nv">DOMAINNAME</span><span class="o">=</span><span class="s2">&quot;gitlab.example.com&quot;</span>
</span><span class='line'><span class="nv">INTERNPORT</span><span class="o">=</span><span class="s2">&quot;54321&quot;</span>
</span><span class='line'><span class="c"># Check availablebility of port.</span>
</span><span class='line'>netstat -tulpen <span class="p">|</span> grep <span class="k">${</span><span class="nv">INTERNPORT</span><span class="k">}</span>
</span><span class='line'><span class="c">#	No answer, if port is unused.</span>
</span><span class='line'>
</span><span class='line'><span class="nv">WORKSPACE</span><span class="o">=</span><span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/workspace
</span><span class='line'>mkdir -p <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>
</span><span class='line'><span class="nb">cd</span> <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c">################################################################################</span>
</span><span class='line'>
</span><span class='line'><span class="c"># GitLab 7.1-stable installation on uberspace account wioth rbenv.</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Using:</span>
</span><span class='line'><span class="c"># Git 2.0.4</span>
</span><span class='line'><span class="c"># Redis 2.8.13</span>
</span><span class='line'><span class="c"># Python 2.7.3</span>
</span><span class='line'><span class="c"># Ruby 2.1.2 via rbenv 0.4.0</span>
</span><span class='line'><span class="c"># Ruby 2.1.1 via uberspace</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c">### Python ### #################################################################</span>
</span><span class='line'><span class="c"># Add aliases to your bash config</span>
</span><span class='line'>cat <span class="s">&lt;&lt; &#39;__EOF__&#39; &gt;&gt; ${HOME}/.bash_profile</span>
</span><span class='line'>
</span><span class='line'><span class="s">### Python ###</span>
</span><span class='line'><span class="s">alias python=python2.7</span>
</span><span class='line'><span class="s">alias python2=python2.7</span>
</span><span class='line'><span class="s">alias pip=pip-2.7</span>
</span><span class='line'><span class="s">__EOF__</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Don&#39;t forget bashrc. Because services don&#39;t use a login shell.</span>
</span><span class='line'>cat <span class="s">&lt;&lt; &#39;__EOF__&#39; &gt;&gt; ${HOME}/.bashrc</span>
</span><span class='line'>
</span><span class='line'><span class="s">### Python ###</span>
</span><span class='line'><span class="s">alias python=python2.7</span>
</span><span class='line'><span class="s">alias python2=python2.7</span>
</span><span class='line'><span class="s">alias pip=pip-2.7</span>
</span><span class='line'><span class="s">__EOF__</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c">### Toasts ### #################################################################</span>
</span><span class='line'><span class="c"># Git.</span>
</span><span class='line'>toast arm https://www.kernel.org/pub/software/scm/git/git-2.0.4.tar.gz
</span><span class='line'>git config --global user.name <span class="s2">&quot;Git&quot;</span>
</span><span class='line'>git config --global user.email <span class="s2">&quot;${USER}@localhost&quot;</span>
</span><span class='line'>git config --global core.autocrlf input
</span><span class='line'>
</span><span class='line'><span class="c"># Redis.</span>
</span><span class='line'>toast arm http://download.redis.io/releases/redis-2.8.13.tar.gz
</span><span class='line'>mkdir -p <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.redis
</span><span class='line'>cat &gt; <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.redis/conf <span class="s">&lt;&lt;__EOF__</span>
</span><span class='line'><span class="s">unixsocket ${HOME}/.redis/sock</span>
</span><span class='line'><span class="s">daemonize no</span>
</span><span class='line'><span class="s"># For logging in uberspace service.</span>
</span><span class='line'><span class="s"># logfile stdout</span>
</span><span class='line'><span class="s"># For logging in a file.</span>
</span><span class='line'><span class="s">logfile ${HOME}/.redis/log</span>
</span><span class='line'><span class="s">port 0</span>
</span><span class='line'><span class="s">__EOF__</span>
</span><span class='line'>redis-server <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.redis/conf <span class="p">&amp;</span>
</span><span class='line'><span class="c"># Access: redis-cli -s ${HOME}/.redis/conf &amp;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c">### Ruby ### ###################################################################</span>
</span><span class='line'><span class="c"># From uberspace.</span>
</span><span class='line'>cat <span class="s">&lt;&lt; &#39;__EOF__&#39; &gt;&gt; ${HOME}/.bash_profile</span>
</span><span class='line'>
</span><span class='line'><span class="s">### Ruby ###</span>
</span><span class='line'><span class="s">export PATH=/package/host/localhost/ruby-2.1.1/bin:$PATH</span>
</span><span class='line'><span class="s">export PATH=$HOME/.gem/ruby/2.1.0/bin:$PATH</span>
</span><span class='line'><span class="s">__EOF__</span>
</span><span class='line'>
</span><span class='line'>cat <span class="s">&lt;&lt; &#39;__EOF__&#39; &gt;&gt; ${HOME}/.bashrc</span>
</span><span class='line'>
</span><span class='line'><span class="s">### Ruby ###</span>
</span><span class='line'><span class="s">export PATH=/package/host/localhost/ruby-2.1.1/bin:$PATH</span>
</span><span class='line'><span class="s">export PATH=$HOME/.gem/ruby/2.1.0/bin:$PATH</span>
</span><span class='line'><span class="s">__EOF__</span>
</span><span class='line'>
</span><span class='line'><span class="c"># To install all gems into user account. </span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;gem: --user-install --no-rdoc --no-ri&quot;</span> &gt; <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.gemrc
</span><span class='line'>
</span><span class='line'>. <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.bash_profile
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c">### Gitlab Shell ### ###########################################################</span>
</span><span class='line'>git clone https://gitlab.com/gitlab-org/gitlab-shell.git <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab-shell
</span><span class='line'><span class="nb">cd</span> <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab-shell
</span><span class='line'><span class="c">#rbenv local 2.1.2</span>
</span><span class='line'>git fetch origin <span class="o">&amp;&amp;</span> git reset --hard <span class="k">$(</span>git describe v1.9.6 <span class="o">||</span> git describe origin/v1.9.6<span class="k">)</span>
</span><span class='line'>
</span><span class='line'>cat &gt; <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab-shell/config.yml <span class="s">&lt;&lt;__EOF__</span>
</span><span class='line'><span class="s">---</span>
</span><span class='line'><span class="s">user: ${USER}</span>
</span><span class='line'><span class="s">#gitlab_url: http://gitlab.${USER}.$(hostname -s).uberspace.de/</span>
</span><span class='line'><span class="s">gitlab_url: http://${DOMAINNAME}/</span>
</span><span class='line'>
</span><span class='line'><span class="s">http_settings:</span>
</span><span class='line'><span class="s">#  user: someone</span>
</span><span class='line'><span class="s">#  password: somepass</span>
</span><span class='line'><span class="s">#  ca_file: /etc/ssl/cert.pem</span>
</span><span class='line'><span class="s">#  ca_path: /etc/pki/tls/certs</span>
</span><span class='line'><span class="s">  self_signed_cert: false</span>
</span><span class='line'>
</span><span class='line'><span class="s">repos_path: &quot;${WORKSPACE}/repositories/&quot;</span>
</span><span class='line'><span class="s">auth_file: &quot;${HOME}/.ssh/authorized_keys&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="s">redis:</span>
</span><span class='line'><span class="s">  bin: ${HOME}/.toast/armed/bin/redis-cli</span>
</span><span class='line'><span class="s">  # host: 127.0.0.1</span>
</span><span class='line'><span class="s">  # port: 6379</span>
</span><span class='line'><span class="s">  socket: ${HOME}/.redis/sock</span>
</span><span class='line'><span class="s">  # socket: /tmp/redis.socket # Only define this if you want to use sockets</span>
</span><span class='line'><span class="s">  namespace: resque:gitlab</span>
</span><span class='line'>
</span><span class='line'><span class="s"># Log file.</span>
</span><span class='line'><span class="s">log_file: &quot;${WORKSPACE}/gitlab-shell/gitlab-shell.log&quot;</span>
</span><span class='line'><span class="s">log_level: INFO</span>
</span><span class='line'>
</span><span class='line'><span class="s"># Audit usernames.</span>
</span><span class='line'><span class="s">audit_usernames: false</span>
</span><span class='line'><span class="s">__EOF__</span>
</span><span class='line'>
</span><span class='line'><span class="c">#?</span>
</span><span class='line'><span class="c">#bundle install --deployment --without development test</span>
</span><span class='line'>./bin/install
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c">### GitLab ### #################################################################</span>
</span><span class='line'>git clone https://gitlab.com/gitlab-org/gitlab-ce.git -b 7-1-stable <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab
</span><span class='line'><span class="nb">cd</span> <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab
</span><span class='line'><span class="c">#rbenv local 2.1.2</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Some folders</span>
</span><span class='line'>mkdir -p log
</span><span class='line'>mkdir -p tmp/pids
</span><span class='line'>mkdir -p tmp/sockets
</span><span class='line'>mkdir -p public/uploads
</span><span class='line'><span class="c"># Allow access to folders.</span>
</span><span class='line'>chown -R <span class="k">${</span><span class="nv">USER</span><span class="k">}</span> log/
</span><span class='line'>chown -R <span class="k">${</span><span class="nv">USER</span><span class="k">}</span> tmp/
</span><span class='line'>chmod -R u+rwX <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/repositories
</span><span class='line'>chmod -R u+rwX log/
</span><span class='line'>chmod -R u+rwX tmp/
</span><span class='line'>chmod -R u+rwX tmp/pids/
</span><span class='line'>chmod -R u+rwX tmp/sockets/
</span><span class='line'>chmod -R u+rwX public/uploads
</span><span class='line'><span class="c"># GitLab Satelittes.</span>
</span><span class='line'>mkdir -p <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab-satellites
</span><span class='line'>chmod u+rwx,g<span class="o">=</span>rx,o-rwx <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab-satellites
</span><span class='line'>
</span><span class='line'><span class="c"># Configure the application main config file.</span>
</span><span class='line'>cat &gt; config/gitlab.yml <span class="s">&lt;&lt;__EOF__</span>
</span><span class='line'><span class="s"># # # # # # # # # # # # # # # # # #</span>
</span><span class='line'><span class="s"># GitLab application config file  #</span>
</span><span class='line'><span class="s"># # # # # # # # # # # # # # # # # #</span>
</span><span class='line'>
</span><span class='line'><span class="s">production: &amp;base</span>
</span><span class='line'><span class="s">  #</span>
</span><span class='line'><span class="s">  # 1. GitLab app settings</span>
</span><span class='line'><span class="s">  # ==========================</span>
</span><span class='line'>
</span><span class='line'><span class="s">  ## GitLab settings</span>
</span><span class='line'><span class="s">  gitlab:</span>
</span><span class='line'><span class="s">    ## Web server settings (note: host is the FQDN, do not include http://)</span>
</span><span class='line'><span class="s">    host: ${DOMAINNAME}</span>
</span><span class='line'><span class="s">    port: 80</span>
</span><span class='line'><span class="s">    https: true</span>
</span><span class='line'>
</span><span class='line'><span class="s">    user: ${USER}</span>
</span><span class='line'><span class="s">    email_from: ${USER}@${DOMAINNAME}</span>
</span><span class='line'>
</span><span class='line'><span class="s">    ## User settings</span>
</span><span class='line'><span class="s">    default_projects_limit: 10</span>
</span><span class='line'><span class="s">    # default_can_create_group: false  # default: true</span>
</span><span class='line'><span class="s">    # username_changing_enabled: false # default: true - User can change her username/namespace</span>
</span><span class='line'><span class="s">    ## Default theme</span>
</span><span class='line'><span class="s">    ##   BASIC  = 1, MARS   = 2, MODERN = 3, GRAY   = 4, COLOR  = 5</span>
</span><span class='line'><span class="s">    default_theme: 2 # default: 2</span>
</span><span class='line'>
</span><span class='line'><span class="s">    ## Users management</span>
</span><span class='line'><span class="s">    # default: false - Account passwords are not sent via the email if signup is enabled.</span>
</span><span class='line'><span class="s">    # signup_enabled: true</span>
</span><span class='line'><span class="s">    #</span>
</span><span class='line'><span class="s">    # default: true - If set to false, standard login form won&#39;t be shown on the sign-in page</span>
</span><span class='line'><span class="s">    # signin_enabled: false</span>
</span><span class='line'>
</span><span class='line'><span class="s">    # Restrict setting visibility levels for non-admin users.</span>
</span><span class='line'><span class="s">    # The default is to allow all levels.</span>
</span><span class='line'><span class="s">    #restricted_visibility_levels: [ &quot;public&quot; ]</span>
</span><span class='line'>
</span><span class='line'><span class="s">    ## Automatic issue closing</span>
</span><span class='line'><span class="s">    # If a commit message matches this regular expression, all issues referenced from the matched text will be closed.</span>
</span><span class='line'><span class="s">    # This happens when the commit is pushed or merged into the default branch of a project.</span>
</span><span class='line'><span class="s">    # When not specified the default issue_closing_pattern as specified below will be used.</span>
</span><span class='line'><span class="s">    # issue_closing_pattern: &#39;([Cc]lose[sd]|[Ff]ixe[sd]) #(\d+)&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="s">    ## Default project features settings</span>
</span><span class='line'><span class="s">    default_projects_features:</span>
</span><span class='line'><span class="s">      issues: true</span>
</span><span class='line'><span class="s">      merge_requests: true</span>
</span><span class='line'><span class="s">      wiki: true</span>
</span><span class='line'><span class="s">      snippets: false</span>
</span><span class='line'><span class="s">      visibility_level: &quot;private&quot;  # can be &quot;private&quot; | &quot;internal&quot; | &quot;public&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="s">    ## Repository downloads directory</span>
</span><span class='line'><span class="s">    # When a user clicks e.g. &#39;Download zip&#39; on a project, a temporary zip file is created in the following directory.</span>
</span><span class='line'><span class="s">    # The default is &#39;tmp/repositories&#39; relative to the root of the Rails app.</span>
</span><span class='line'><span class="s">    # repository_downloads_path: tmp/repositories</span>
</span><span class='line'>
</span><span class='line'><span class="s">  ## External issues trackers</span>
</span><span class='line'><span class="s">  issues_tracker:</span>
</span><span class='line'>
</span><span class='line'><span class="s">  ## Gravatar</span>
</span><span class='line'><span class="s">  gravatar:</span>
</span><span class='line'><span class="s">    enabled: true                 # Use user avatar image from Gravatar.com (default: true)</span>
</span><span class='line'><span class="s">    # gravatar urls: possible placeholders: %{hash} %{size} %{email}</span>
</span><span class='line'><span class="s">    # plain_url: &quot;http://...&quot;     # default: http://www.gravatar.com/avatar/%{hash}?s=%{size}&amp;d=identicon</span>
</span><span class='line'><span class="s">    # ssl_url:   &quot;https://...&quot;    # default: https://secure.gravatar.com/avatar/%{hash}?s=%{size}&amp;d=identicon</span>
</span><span class='line'>
</span><span class='line'><span class="s">  #</span>
</span><span class='line'><span class="s">  # 2. Auth settings</span>
</span><span class='line'><span class="s">  # ==========================</span>
</span><span class='line'>
</span><span class='line'><span class="s">  ## LDAP settings</span>
</span><span class='line'><span class="s">  ldap:</span>
</span><span class='line'><span class="s">    enabled: false</span>
</span><span class='line'><span class="s">    host: &#39;_your_ldap_server&#39;</span>
</span><span class='line'><span class="s">    port: 636</span>
</span><span class='line'><span class="s">    uid: &#39;sAMAccountName&#39;</span>
</span><span class='line'><span class="s">    method: &#39;ssl&#39; # &quot;tls&quot; or &quot;ssl&quot; or &quot;plain&quot;</span>
</span><span class='line'><span class="s">    bind_dn: &#39;_the_full_dn_of_the_user_you_will_bind_with&#39;</span>
</span><span class='line'><span class="s">    password: &#39;_the_password_of_the_bind_user&#39;</span>
</span><span class='line'><span class="s">    # If you are using &quot;uid: &#39;userPrincipalName&#39;&quot; on ActiveDirectory you need to</span>
</span><span class='line'><span class="s">    # disable this setting, because the userPrincipalName contains an &#39;@&#39;.</span>
</span><span class='line'><span class="s">    allow_username_or_email_login: true</span>
</span><span class='line'><span class="s">    base: &#39;&#39;</span>
</span><span class='line'><span class="s">    user_filter: &#39;&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="s">  ## OmniAuth settings</span>
</span><span class='line'><span class="s">  omniauth:</span>
</span><span class='line'><span class="s">    # Allow login via Twitter, Google, etc. using OmniAuth providers</span>
</span><span class='line'><span class="s">    enabled: false</span>
</span><span class='line'><span class="s">    # CAUTION!</span>
</span><span class='line'><span class="s">    # This allows users to login without having a user account first (default: false).</span>
</span><span class='line'><span class="s">    # User accounts will be created automatically when authentication was successful.</span>
</span><span class='line'><span class="s">    allow_single_sign_on: false</span>
</span><span class='line'><span class="s">    # Locks down those users until they have been cleared by the admin (default: true).</span>
</span><span class='line'><span class="s">    block_auto_created_users: true</span>
</span><span class='line'><span class="s">    providers:</span>
</span><span class='line'>
</span><span class='line'><span class="s">  #</span>
</span><span class='line'><span class="s">  # 3. Advanced settings</span>
</span><span class='line'><span class="s">  # ==========================</span>
</span><span class='line'>
</span><span class='line'><span class="s">  # GitLab Satellites</span>
</span><span class='line'><span class="s">  satellites:</span>
</span><span class='line'><span class="s">    # Relative paths are relative to Rails.root (default: tmp/repo_satellites/)</span>
</span><span class='line'><span class="s">    path: ${WORKSPACE}/gitlab-satellites/</span>
</span><span class='line'>
</span><span class='line'><span class="s">  ## Backup settings</span>
</span><span class='line'><span class="s">  backup:</span>
</span><span class='line'><span class="s">    path: &quot;tmp/backups&quot;   # Relative paths are relative to Rails.root (default: tmp/backups/)</span>
</span><span class='line'><span class="s">    # keep_time: 604800   # default: 0 (forever) (in seconds)</span>
</span><span class='line'>
</span><span class='line'><span class="s">  ## GitLab Shell settings</span>
</span><span class='line'><span class="s">  gitlab_shell:</span>
</span><span class='line'><span class="s">    path: ${WORKSPACE}/gitlab-shell/</span>
</span><span class='line'>
</span><span class='line'><span class="s">    # REPOS_PATH MUST NOT BE A SYMLINK!!!</span>
</span><span class='line'><span class="s">    repos_path: ${WORKSPACE}/repositories/</span>
</span><span class='line'><span class="s">    hooks_path: ${WORKSPACE}/gitlab-shell/hooks/</span>
</span><span class='line'>
</span><span class='line'><span class="s">    # Git over HTTP</span>
</span><span class='line'><span class="s">    upload_pack: true</span>
</span><span class='line'><span class="s">    receive_pack: true</span>
</span><span class='line'>
</span><span class='line'><span class="s">    # If you use non-standard ssh port you need to specify it</span>
</span><span class='line'><span class="s">    # ssh_port: 22</span>
</span><span class='line'>
</span><span class='line'><span class="s">  ## Git settings</span>
</span><span class='line'><span class="s">  # CAUTION!</span>
</span><span class='line'><span class="s">  # Use the default values unless you really know what you are doing</span>
</span><span class='line'><span class="s">  git:</span>
</span><span class='line'><span class="s">    bin_path: ${HOME}/.toast/armed/bin/git</span>
</span><span class='line'><span class="s">    # The next value is the maximum memory size grit can use</span>
</span><span class='line'><span class="s">    # Given in number of bytes per git object (e.g. a commit)</span>
</span><span class='line'><span class="s">    # This value can be increased if you have very large commits</span>
</span><span class='line'><span class="s">    max_size: 5242880 # 5.megabytes</span>
</span><span class='line'><span class="s">    # Git timeout to read a commit, in seconds</span>
</span><span class='line'><span class="s">    timeout: 10</span>
</span><span class='line'>
</span><span class='line'><span class="s">  #</span>
</span><span class='line'><span class="s">  # 4. Extra customization</span>
</span><span class='line'><span class="s">  # ==========================</span>
</span><span class='line'>
</span><span class='line'><span class="s">  extra:</span>
</span><span class='line'><span class="s">    ## Google analytics. Uncomment if you want it</span>
</span><span class='line'><span class="s">    # google_analytics_id: &#39;_your_tracking_id&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="s">    ## Piwik analytics.</span>
</span><span class='line'><span class="s">    # piwik_url: &#39;_your_piwik_url&#39;</span>
</span><span class='line'><span class="s">    # piwik_site_id: &#39;_your_piwik_site_id&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="s">    ## Text under sign-in page (Markdown enabled)</span>
</span><span class='line'><span class="s">    # sign_in_text: |</span>
</span><span class='line'><span class="s">    #   ![Company Logo](http://www.companydomain.com/logo.png)</span>
</span><span class='line'><span class="s">    #   [Learn more about CompanyName](http://www.companydomain.com/)</span>
</span><span class='line'>
</span><span class='line'><span class="s">__EOF__</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Configure Charlie the unicorn. ;-)</span>
</span><span class='line'>cat &gt; config/unicorn.rb <span class="s">&lt;&lt;__EOF__</span>
</span><span class='line'><span class="s"># Sample verbose configuration file for Unicorn (not Rack)</span>
</span><span class='line'>
</span><span class='line'><span class="s">worker_processes 2</span>
</span><span class='line'>
</span><span class='line'><span class="s">working_directory &quot;${WORKSPACE}/gitlab&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="s">listen &quot;${WORKSPACE}/gitlab/tmp/sockets/gitlab.socket&quot;, :backlog =&gt; 64</span>
</span><span class='line'><span class="s">listen &quot;127.0.0.1:${INTERNPORT}&quot;, :tcp_nopush =&gt; true</span>
</span><span class='line'>
</span><span class='line'><span class="s">timeout 30</span>
</span><span class='line'>
</span><span class='line'><span class="s"># feel free to point this anywhere accessible on the filesystem</span>
</span><span class='line'><span class="s">pid &quot;${WORKSPACE}/gitlab/tmp/pids/unicorn.pid&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="s">stderr_path &quot;${WORKSPACE}/gitlab/log/unicorn.stderr.log&quot;</span>
</span><span class='line'><span class="s">stdout_path &quot;${WORKSPACE}/gitlab/log/unicorn.stdout.log&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="s">preload_app true</span>
</span><span class='line'><span class="s">GC.respond_to?(:copy_on_write_friendly=) and</span>
</span><span class='line'><span class="s">  GC.copy_on_write_friendly = true</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="s">check_client_connection false</span>
</span><span class='line'>
</span><span class='line'><span class="s">before_fork do |server, worker|</span>
</span><span class='line'><span class="s">  defined?(ActiveRecord::Base) and</span>
</span><span class='line'><span class="s">    ActiveRecord::Base.connection.disconnect!</span>
</span><span class='line'>
</span><span class='line'><span class="s">  old_pid = &quot;#{server.config[:pid]}.oldbin&quot;</span>
</span><span class='line'><span class="s">  if old_pid != server.pid</span>
</span><span class='line'><span class="s">    begin</span>
</span><span class='line'><span class="s">      sig = (worker.nr + 1) &gt;= server.worker_processes ? :QUIT : :TTOU</span>
</span><span class='line'><span class="s">      Process.kill(sig, File.read(old_pid).to_i)</span>
</span><span class='line'><span class="s">    rescue Errno::ENOENT, Errno::ESRCH</span>
</span><span class='line'><span class="s">    end</span>
</span><span class='line'><span class="s">  end</span>
</span><span class='line'><span class="s">  # sleep 1</span>
</span><span class='line'><span class="s">end</span>
</span><span class='line'>
</span><span class='line'><span class="s">after_fork do |server, worker|</span>
</span><span class='line'>
</span><span class='line'><span class="s">  defined?(ActiveRecord::Base) and</span>
</span><span class='line'><span class="s">    ActiveRecord::Base.establish_connection</span>
</span><span class='line'>
</span><span class='line'><span class="s">end</span>
</span><span class='line'>
</span><span class='line'><span class="s">__EOF__</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Config Redis connection.</span>
</span><span class='line'>cat &gt; config/resque.yml <span class="s">&lt;&lt;__EOF__</span>
</span><span class='line'><span class="s">development: redis://localhost:6379</span>
</span><span class='line'><span class="s">test: redis://localhost:6379</span>
</span><span class='line'><span class="s">#production: redis://redis.example.com:6379</span>
</span><span class='line'><span class="s">production: unix:${HOME}/.redis/sock</span>
</span><span class='line'><span class="s">__EOF__</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Configure your rack.</span>
</span><span class='line'>cp config/initializers/rack_attack.rb.example config/initializers/rack_attack.rb
</span><span class='line'>
</span><span class='line'><span class="c"># Production environment.</span>
</span><span class='line'>cp --force config/environments/production.rb config/environments/production.rb.bak
</span><span class='line'>cat &gt; config/environments/production.rb <span class="s">&lt;&lt;__EOF__</span>
</span><span class='line'><span class="s">Gitlab::Application.configure do</span>
</span><span class='line'><span class="s">  # Settings specified here will take precedence over those in config/application.rb</span>
</span><span class='line'>
</span><span class='line'><span class="s">  # Code is not reloaded between requests</span>
</span><span class='line'><span class="s">  config.cache_classes = true</span>
</span><span class='line'>
</span><span class='line'><span class="s">  # Full error reports are disabled and caching is turned on</span>
</span><span class='line'><span class="s">  config.consider_all_requests_local       = false</span>
</span><span class='line'><span class="s">  config.action_controller.perform_caching = true</span>
</span><span class='line'>
</span><span class='line'><span class="s">  # Disable Rails&#39;s static asset server (Apache or nginx will already do this)</span>
</span><span class='line'><span class="s">  config.serve_static_assets = true</span>
</span><span class='line'>
</span><span class='line'><span class="s">  # Compress JavaScripts and CSS</span>
</span><span class='line'><span class="s">  config.assets.compress = true</span>
</span><span class='line'>
</span><span class='line'><span class="s">  # Don&#39;t fallback to assets pipeline if a precompiled asset is missed</span>
</span><span class='line'><span class="s">  config.assets.compile = true</span>
</span><span class='line'>
</span><span class='line'><span class="s">  # Generate digests for assets URLs</span>
</span><span class='line'><span class="s">  config.assets.digest = true</span>
</span><span class='line'>
</span><span class='line'><span class="s">  # Defaults to nil and saved in location specified by config.assets.prefix</span>
</span><span class='line'><span class="s">  # config.assets.manifest = YOUR_PATH</span>
</span><span class='line'>
</span><span class='line'><span class="s">  # Specifies the header that your server uses for sending files</span>
</span><span class='line'><span class="s">  # config.action_dispatch.x_sendfile_header = &quot;X-Sendfile&quot; # for apache</span>
</span><span class='line'><span class="s">  # config.action_dispatch.x_sendfile_header = &#39;X-Accel-Redirect&#39; # for nginx</span>
</span><span class='line'>
</span><span class='line'><span class="s">  # Force all access to the app over SSL, use Strict-Transport-Security, and use secure cookies.</span>
</span><span class='line'><span class="s">  # config.force_ssl = true</span>
</span><span class='line'>
</span><span class='line'><span class="s">  # See everything in the log (default is :info)</span>
</span><span class='line'><span class="s">  # config.log_level = :debug</span>
</span><span class='line'>
</span><span class='line'><span class="s">  # Suppress &#39;Rendered template ...&#39; messages in the log</span>
</span><span class='line'><span class="s">  # source: http://stackoverflow.com/a/16369363</span>
</span><span class='line'><span class="s">  %w{render_template render_partial render_collection}.each do |event|</span>
</span><span class='line'><span class="s">    ActiveSupport::Notifications.unsubscribe &quot;#{event}.action_view&quot;</span>
</span><span class='line'><span class="s">  end</span>
</span><span class='line'>
</span><span class='line'><span class="s">  # Prepend all log lines with the following tags</span>
</span><span class='line'><span class="s">  # config.log_tags = [ :subdomain, :uuid ]</span>
</span><span class='line'>
</span><span class='line'><span class="s">  # Use a different logger for distributed setups</span>
</span><span class='line'><span class="s">  # config.logger = ActiveSupport::TaggedLogging.new(SyslogLogger.new)</span>
</span><span class='line'>
</span><span class='line'><span class="s">  # Use a different cache store in production</span>
</span><span class='line'><span class="s">  config_file = Rails.root.join(&#39;config&#39;, &#39;resque.yml&#39;)</span>
</span><span class='line'>
</span><span class='line'><span class="s">  resque_url = if File.exists?(config_file)</span>
</span><span class='line'><span class="s">                 YAML.load_file(config_file)[Rails.env]</span>
</span><span class='line'><span class="s">               else</span>
</span><span class='line'><span class="s">                 &quot;redis://localhost:6379&quot;</span>
</span><span class='line'><span class="s">               end</span>
</span><span class='line'><span class="s">  config.cache_store = :redis_store, {:url =&gt; resque_url}, {namespace: &#39;cache:gitlab&#39;}</span>
</span><span class='line'>
</span><span class='line'><span class="s">  # Enable serving of images, stylesheets, and JavaScripts from an asset server</span>
</span><span class='line'><span class="s">  # config.action_controller.asset_host = &quot;http://assets.example.com&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="s">  # Precompile additional assets (application.js, application.css, and all non-JS/CSS are already added)</span>
</span><span class='line'><span class="s">  # config.assets.precompile += %w( search.js )</span>
</span><span class='line'>
</span><span class='line'><span class="s">  # Disable delivery errors, bad email addresses will be ignored</span>
</span><span class='line'><span class="s">  # config.action_mailer.raise_delivery_errors = false</span>
</span><span class='line'>
</span><span class='line'><span class="s">  # Enable threaded mode</span>
</span><span class='line'><span class="s">  # config.threadsafe! unless $rails_rake_task</span>
</span><span class='line'>
</span><span class='line'><span class="s">  # Enable locale fallbacks for I18n (makes lookups for any locale fall back to</span>
</span><span class='line'><span class="s">  # the I18n.default_locale when a translation can not be found)</span>
</span><span class='line'><span class="s">  config.i18n.fallbacks = true</span>
</span><span class='line'>
</span><span class='line'><span class="s">  # Send deprecation notices to registered listeners</span>
</span><span class='line'><span class="s">  config.active_support.deprecation = :notify</span>
</span><span class='line'>
</span><span class='line'><span class="s">  config.action_mailer.delivery_method = :sendmail</span>
</span><span class='line'><span class="s">  # Defaults to:</span>
</span><span class='line'><span class="s">  # # config.action_mailer.sendmail_settings = {</span>
</span><span class='line'><span class="s">  # #   location: &#39;/usr/sbin/sendmail&#39;,</span>
</span><span class='line'><span class="s">  # #   arguments: &#39;-i -t&#39;</span>
</span><span class='line'><span class="s">  # # }</span>
</span><span class='line'><span class="s">  config.action_mailer.perform_deliveries = true</span>
</span><span class='line'><span class="s">  config.action_mailer.raise_delivery_errors = true</span>
</span><span class='line'>
</span><span class='line'><span class="s">  config.eager_load = true</span>
</span><span class='line'><span class="s">  config.assets.js_compressor = :uglifier</span>
</span><span class='line'>
</span><span class='line'><span class="s">  config.allow_concurrency = false</span>
</span><span class='line'><span class="s">end</span>
</span><span class='line'><span class="s">__EOF__</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c">### GitLab Database ### ########################################################</span>
</span><span class='line'><span class="c"># Be carefull with &quot;DROP DATABASE&quot; commands!</span>
</span><span class='line'>mysql -e <span class="s2">&quot;DROP DATABASE ${USER}_gitlab;&quot;</span>
</span><span class='line'>mysql -e <span class="s2">&quot;CREATE DATABASE ${USER}_gitlab CHARACTER SET utf8&quot;</span>
</span><span class='line'>cat &gt; <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab/config/database.yml <span class="s">&lt;&lt;__EOF__</span>
</span><span class='line'><span class="s">production:</span>
</span><span class='line'><span class="s">  adapter: mysql2</span>
</span><span class='line'><span class="s">  encoding: utf8</span>
</span><span class='line'><span class="s">  reconnect: false</span>
</span><span class='line'><span class="s">  database: ${USER}_gitlab</span>
</span><span class='line'><span class="s">  pool: 10</span>
</span><span class='line'><span class="s">  username: ${USER}</span>
</span><span class='line'><span class="s">  password: `my_print_defaults client | grep -- --password | awk -F = &#39;{ print $2 }&#39;`</span>
</span><span class='line'><span class="s">  # host: localhost</span>
</span><span class='line'><span class="s">  # socket: /tmp/mysql.sock</span>
</span><span class='line'><span class="s">__EOF__</span>
</span><span class='line'>chmod o-rwx <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab/config/database.yml
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c">### Gitlab Install ### #########################################################</span>
</span><span class='line'><span class="nb">cd</span> <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab
</span><span class='line'><span class="c"># CentOS 5? cat /etc/*-release</span>
</span><span class='line'><span class="c"># Then do also: bundle config build.charlock_holmes --with-icu-dir=/package/host/localhost/icu4c</span>
</span><span class='line'>bundle install --deployment --without development <span class="nb">test </span>postgres aws
</span><span class='line'>
</span><span class='line'><span class="c"># Be sure, redis is running and a database exists before doing the setup.</span>
</span><span class='line'>bundle <span class="nb">exec </span>rake gitlab:setup <span class="nv">RAILS_ENV</span><span class="o">=</span>production
</span><span class='line'><span class="c">#	Answer with &#39;yes&#39; to create db tables.</span>
</span><span class='line'><span class="c"># 	Ends with:</span>
</span><span class='line'><span class="c"># 	...</span>
</span><span class='line'><span class="c"># 	Administrator account created:</span>
</span><span class='line'><span class="c"># 	</span>
</span><span class='line'><span class="c"># 	login.........root</span>
</span><span class='line'><span class="c"># 	password......5iveL!fe</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c">### Gitlab initscript ### ######################################################</span>
</span><span class='line'><span class="c"># Be aware, this starter is not good to use with Uberspace service.</span>
</span><span class='line'><span class="c"># Default variables file.</span>
</span><span class='line'>mkdir -p <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/etc/default
</span><span class='line'>cat &gt; <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/etc/default/gitlab.default <span class="s">&lt;&lt;__EOF__</span>
</span><span class='line'><span class="s">RAILS_ENV=&quot;production&quot;</span>
</span><span class='line'><span class="s">app_user=&quot;${USER}&quot;</span>
</span><span class='line'><span class="s">app_root=&quot;${WORKSPACE}/gitlab&quot;</span>
</span><span class='line'><span class="s">pid_path=&quot;\$app_root/tmp/pids&quot;</span>
</span><span class='line'><span class="s">socket_path=&quot;\$app_root/tmp/sockets&quot;</span>
</span><span class='line'><span class="s">web_server_pid_path=&quot;\$pid_path/unicorn.pid&quot;</span>
</span><span class='line'><span class="s">sidekiq_pid_path=&quot;\$pid_path/sidekiq.pid&quot;</span>
</span><span class='line'><span class="s">__EOF__</span>
</span><span class='line'>
</span><span class='line'><span class="c"># GitLab starter.</span>
</span><span class='line'>cp -f <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/workspace/gitlab/lib/support/init.d/gitlab <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/bin/gitlab
</span><span class='line'>chmod +x <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/bin/gitlab
</span><span class='line'><span class="c"># Change to &#39;read ${HOME}/etc/default/gitlab.default&#39;.</span>
</span><span class='line'>sed -i -e <span class="s1">&#39;s=\/etc\/default\/gitlab=${HOME}\/etc\/default\/gitlab.default=g&#39;</span> <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/bin/gitlab
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c">### Redirect ### ###############################################################</span>
</span><span class='line'><span class="c"># Configure web.</span>
</span><span class='line'>mkdir -p /var/www/virtual/<span class="k">${</span><span class="nv">USER</span><span class="k">}</span>/<span class="k">${</span><span class="nv">DOMAINNAME</span><span class="k">}</span>
</span><span class='line'>cat &gt; /var/www/virtual/<span class="k">${</span><span class="nv">USER</span><span class="k">}</span>/<span class="k">${</span><span class="nv">DOMAINNAME</span><span class="k">}</span>/.htaccess <span class="s">&lt;&lt;__EOF__</span>
</span><span class='line'><span class="s">&lt;IfModule mod_rewrite.c&gt;</span>
</span><span class='line'><span class="s">  RewriteEngine On</span>
</span><span class='line'><span class="s">  RewriteBase /</span>
</span><span class='line'><span class="s">  RewriteRule ^(.*)$ http://localhost:${INTERNPORT}/\$1 [P]</span>
</span><span class='line'><span class="s">&lt;/IfModule&gt;</span>
</span><span class='line'><span class="s"># Agains &quot;Can&#39;t verify CSRF token authenticity&quot; error.</span>
</span><span class='line'><span class="s">RequestHeader set X-Forwarded-Proto https</span>
</span><span class='line'><span class="s">__EOF__</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c">### Check ### ##################################################################</span>
</span><span class='line'><span class="c"># Last check.</span>
</span><span class='line'><span class="nb">cd</span> <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/workspace/gitlab
</span><span class='line'>bundle <span class="nb">exec </span>rake gitlab:env:info <span class="nv">RAILS_ENV</span><span class="o">=</span>production
</span><span class='line'>bundle <span class="nb">exec </span>rake gitlab:check <span class="nv">RAILS_ENV</span><span class="o">=</span>production
</span><span class='line'>
</span><span class='line'>pause <span class="s1">&#39;Press [Enter] key to continue... if your are lucky with the tests above. \nAfterwards it is just starting Gitlab. So it will be not a problem to abort this script.&#39;</span>
</span><span class='line'>bundle <span class="nb">exec </span>rake assets:precompile <span class="nv">RAILS_ENV</span><span class="o">=</span>production
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c">### Start ### ##################################################################</span>
</span><span class='line'><span class="c"># This is for what we&#39;ve done all this stuff above.</span>
</span><span class='line'><span class="nb">cd</span>
</span><span class='line'>gitlab start <span class="c"># start, stop, restart, status</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c">################################################################################</span>
</span><span class='line'><span class="c">################################################################################</span>
</span><span class='line'><span class="c">################################################################################</span>
</span></code></pre></td></tr></table></div></figure>&#8211;>


<p>If you want a fire-and-forget-script, use the script from &lsquo;tl;dr&rsquo; section above.</p>

<p>Now we do it step by step. Open a terminal and login into your Uberspace and do &hellip;</p>

<!--########################################-->


<h3>Variables and install folder</h3>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Domain <span class="k">for</span> your gitlab.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;DOMAINNAME<span class="o">=</span><span class="p">&amp;</span>ldquo<span class="p">;</span>gitlab.<span class="k">${</span><span class="nv">USER</span><span class="k">}</span>.<span class="k">$(</span>hostname -a<span class="k">)</span>.uberspace.de<span class="p">&amp;</span>rdquo<span class="p">;</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;DOMAINNAME<span class="o">=</span><span class="p">&amp;</span>ldquo<span class="p">;</span>gitlab.example.com<span class="p">&amp;</span>rdquo<span class="p">;</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;The intern service port on the uberspace.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;INTERNPORT<span class="o">=</span><span class="p">&amp;</span>ldquo<span class="p">;</span>54321<span class="p">&amp;</span>rdquo<span class="p">;</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Check availablebility of the wantet port.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;netstat -tulpen <span class="p">|</span> grep <span class="k">${</span><span class="nv">INTERNPORT</span><span class="k">}</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;No answer, <span class="k">if</span> port is unused.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Install and working directory.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;WORKSPACE<span class="o">=</span><span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/workspace
</span><span class='line'>mkdir -p <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<!--########################################-->


<h3>Python</h3>

<p>Check the python: <code>python -V</code>, <code>python2 -V</code>, <code>pip --version</code> and <code>pip-python --version</code>. If every version number is the same and 2.7+, it&rsquo;s fine and you don&rsquo;t have to do the steps below.</p>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Add aliases to your bash config&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;cat <span class="p">&amp;</span>lt<span class="p">;&amp;</span>lt<span class="p">;</span> <span class="p">&amp;</span>lsquo<span class="p">;</span>&lt;strong&gt;EOF&lt;/strong&gt;<span class="p">&amp;</span>rsquo<span class="p">;</span> &gt;&gt; <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.bash_profile&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h3&gt;Python&lt;/h3&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;alias <span class="nv">python</span><span class="o">=</span>python2.7
</span><span class='line'><span class="nb">alias </span><span class="nv">python2</span><span class="o">=</span>python2.7
</span><span class='line'><span class="nb">alias </span><span class="nv">pip</span><span class="o">=</span>pip-2.7
</span><span class='line'><span class="nb">alias </span>pip-python<span class="o">=</span>pip-2.7
</span><span class='line'>&lt;strong&gt;EOF&lt;/strong&gt;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Don<span class="p">&amp;</span>rsquo<span class="p">;</span>t forget bashrc. Because services don<span class="p">&amp;</span>rsquo<span class="p">;</span>t use a login shell.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;cat <span class="p">&amp;</span>lt<span class="p">;&amp;</span>lt<span class="p">;</span> <span class="p">&amp;</span>lsquo<span class="p">;</span>&lt;strong&gt;EOF&lt;/strong&gt;<span class="p">&amp;</span>rsquo<span class="p">;</span> &gt;&gt; <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.bashrc&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h3&gt;Python&lt;/h3&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;alias <span class="nv">python</span><span class="o">=</span>python2.7
</span><span class='line'><span class="nb">alias </span><span class="nv">python2</span><span class="o">=</span>python2.7
</span><span class='line'><span class="nb">alias </span><span class="nv">pip</span><span class="o">=</span>pip-2.7
</span><span class='line'><span class="nb">alias </span>pip-python<span class="o">=</span>pip-2.7
</span><span class='line'>&lt;strong&gt;EOF&lt;/strong&gt;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;. <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.bash_profile
</span></code></pre></td></tr></table></div></figure></p>

<!--########################################-->


<h3>Toasts</h3>

<p>We need an actual git and redis.</p>

<h4>Git</h4>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>toast arm &lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;https://www.kernel.org/pub/software/scm/git/git-2.0.4.tar.gz&quot;</span>&gt;https://www.kernel.org/pub/software/scm/git/git-2.0.4.tar.gz&lt;/a&gt;
</span><span class='line'>git config <span class="p">&amp;</span>ndash<span class="p">;</span>global user.name <span class="p">&amp;</span>ldquo<span class="p">;</span>Git<span class="p">&amp;</span>rdquo<span class="p">;</span>
</span><span class='line'>git config <span class="p">&amp;</span>ndash<span class="p">;</span>global user.email <span class="p">&amp;</span>ldquo<span class="p">;</span><span class="k">${</span><span class="nv">USER</span><span class="k">}</span>@localhost<span class="p">&amp;</span>rdquo<span class="p">;</span>
</span><span class='line'>git config <span class="p">&amp;</span>ndash<span class="p">;</span>global core.autocrlf input
</span></code></pre></td></tr></table></div></figure></p>

<h4>Redis</h4>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>toast arm &lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;http://download.redis.io/releases/redis-2.8.13.tar.gz&quot;</span>&gt;http://download.redis.io/releases/redis-2.8.13.tar.gz&lt;/a&gt;
</span><span class='line'>mkdir -p <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.redis
</span><span class='line'>cat &gt; <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.redis/conf <span class="p">&amp;</span>lt<span class="p">;&amp;</span>lt<span class="p">;</span>&lt;strong&gt;EOF&lt;/strong&gt;
</span><span class='line'>unixsocket <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.redis/sock
</span><span class='line'>daemonize no&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;For logging in uberspace service.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;logfile stdout&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;For logging in a file.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;logfile <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.redis/log
</span><span class='line'>port 0
</span><span class='line'>&lt;strong&gt;EOF&lt;/strong&gt;
</span><span class='line'>redis-server <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.redis/conf <span class="p">&amp;</span>amp<span class="p">;</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Access: redis-cli -s <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.redis/conf <span class="p">&amp;</span>amp<span class="p">;</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></p>

<!--########################################-->


<h3>Ruby</h3>

<p>You can use the Uberspace Ruby or your own installation (e.g. rbenv). But you have to choose.</p>

<h4>Uberspace Ruby</h4>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>cat <span class="p">&amp;</span>lt<span class="p">;&amp;</span>lt<span class="p">;</span> <span class="p">&amp;</span>lsquo<span class="p">;</span>&lt;strong&gt;EOF&lt;/strong&gt;<span class="p">&amp;</span>rsquo<span class="p">;</span> &gt;&gt; <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.bash_profile&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h3&gt;Ruby&lt;/h3&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;export <span class="nv">PATH</span><span class="o">=</span>/package/host/localhost/ruby-2.1.2/bin:<span class="nv">$PATH</span>
</span><span class='line'><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$HOME</span>/.gem/ruby/2.1.0/bin:<span class="nv">$PATH</span>
</span><span class='line'>&lt;strong&gt;EOF&lt;/strong&gt;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;cat <span class="p">&amp;</span>lt<span class="p">;&amp;</span>lt<span class="p">;</span> <span class="p">&amp;</span>lsquo<span class="p">;</span>&lt;strong&gt;EOF&lt;/strong&gt;<span class="p">&amp;</span>rsquo<span class="p">;</span> &gt;&gt; <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.bashrc&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h3&gt;Ruby&lt;/h3&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;export <span class="nv">PATH</span><span class="o">=</span>/package/host/localhost/ruby-2.1.1/bin:<span class="nv">$PATH</span>
</span><span class='line'><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$HOME</span>/.gem/ruby/2.1.0/bin:<span class="nv">$PATH</span>
</span><span class='line'>&lt;strong&gt;EOF&lt;/strong&gt;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;To install all gems into user account.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;echo <span class="p">&amp;</span>ldquo<span class="p">;</span>gem: <span class="p">&amp;</span>ndash<span class="p">;</span>user-install <span class="p">&amp;</span>ndash<span class="p">;</span>no-rdoc <span class="p">&amp;</span>ndash<span class="p">;</span>no-ri<span class="p">&amp;</span>rdquo<span class="p">;</span> &gt; <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.gemrc&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;. <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.bash_profile
</span></code></pre></td></tr></table></div></figure></p>

<h4>rbenv Ruby</h4>

<p>We use rbenv to manage different Ruby versions for different projects.</p>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Git checkout.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;git clone &lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;https://github.com/sstephenson/rbenv.git&quot;</span>&gt;https://github.com/sstephenson/rbenv.git&lt;/a&gt; <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.rbenv&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Update.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;cd <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.rbenv&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;git pull&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Activate rbenv.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;cat <span class="p">&amp;</span>lt<span class="p">;&amp;</span>lt<span class="p">;</span> <span class="p">&amp;</span>lsquo<span class="p">;</span>&lt;strong&gt;EOF&lt;/strong&gt;<span class="p">&amp;</span>rsquo<span class="p">;</span> &gt;&gt; <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.bash_profile&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h3&gt;rbenv&lt;/h3&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;export <span class="nv">PATH</span><span class="o">=</span><span class="p">&amp;</span>ldquo<span class="p">;</span><span class="nv">$HOME</span>/.rbenv/bin:<span class="nv">$PATH</span><span class="p">&amp;</span>rdquo<span class="p">;</span>
</span><span class='line'><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="p">&amp;</span>ldquo<span class="p">;</span><span class="nv">$HOME</span>/.rbenv/shims:<span class="nv">$PATH</span><span class="p">&amp;</span>rdquo<span class="p">;</span>
</span><span class='line'><span class="nb">eval</span> <span class="p">&amp;</span>ldquo<span class="p">;</span><span class="k">$(</span>rbenv init -<span class="k">)</span><span class="p">&amp;</span>rdquo<span class="p">;</span>
</span><span class='line'>&lt;strong&gt;EOF&lt;/strong&gt;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Don<span class="p">&amp;</span>rsquo<span class="p">;</span>t forget bashrc.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;cat <span class="p">&amp;</span>lt<span class="p">;&amp;</span>lt<span class="p">;</span> <span class="p">&amp;</span>lsquo<span class="p">;</span>&lt;strong&gt;EOF&lt;/strong&gt;<span class="p">&amp;</span>rsquo<span class="p">;</span> &gt;&gt; <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.bashrc&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h3&gt;rbenv&lt;/h3&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;export <span class="nv">PATH</span><span class="o">=</span><span class="p">&amp;</span>ldquo<span class="p">;</span><span class="nv">$HOME</span>/.rbenv/bin:<span class="nv">$PATH</span><span class="p">&amp;</span>rdquo<span class="p">;</span>
</span><span class='line'><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="p">&amp;</span>ldquo<span class="p">;</span><span class="nv">$HOME</span>/.rbenv/shims:<span class="nv">$PATH</span><span class="p">&amp;</span>rdquo<span class="p">;</span>
</span><span class='line'><span class="nb">eval</span> <span class="p">&amp;</span>ldquo<span class="p">;</span><span class="k">$(</span>rbenv init -<span class="k">)</span><span class="p">&amp;</span>rdquo<span class="p">;</span>
</span><span class='line'>&lt;strong&gt;EOF&lt;/strong&gt;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Activate profile changes&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;. <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.bash_profile&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Check rbenv.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;type rbenv&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Install ruby-build - The &lt;code&gt;rbenv install&lt;/code&gt; command.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;git clone &lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;https://github.com/sstephenson/ruby-build.git&quot;</span>&gt;https://github.com/sstephenson/ruby-build.git&lt;/a&gt; <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.rbenv/plugins/ruby-build&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Install rbenv-gem-rehash - The auto &lt;code&gt;rbenv rehash&lt;/code&gt; when installing new gems.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;git clone &lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;https://github.com/sstephenson/rbenv-gem-rehash.git&quot;</span>&gt;https://github.com/sstephenson/rbenv-gem-rehash.git&lt;/a&gt; <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.rbenv/plugins/rbenv-gem-rehash&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;List available installations.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;rbenv install <span class="p">&amp;</span>ndash<span class="p">;</span>list&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Install ruby <span class="o">(</span>need some <span class="nb">time</span><span class="o">)</span>.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;rbenv install 2.1.2
</span><span class='line'>rbenv install 1.9.3-p547&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Set global ruby version.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;rbenv global 2.1.2&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Rehash rbenv. This write changes into ~/.rbenv/shims.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Important <span class="k">if</span> gems provide some new bins.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Or the environment changes.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;rbenv rehash&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Hooks rbenv into the shell.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Already happend after &lt;code&gt;. ~/.bash_profile&lt;/code&gt;.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Use &lt;code&gt;rbenv init -&lt;/code&gt; to see more informations.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;rbenv init&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Print rbenv used ruby version.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;echo <span class="p">&amp;</span>ldquo<span class="p">;</span>rbenv version:<span class="p">&amp;</span>rdquo<span class="p">;</span>
</span><span class='line'>rbenv version&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Install options <span class="k">for</span> gem.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Old: <span class="nb">echo</span> <span class="p">&amp;</span>ldquo<span class="p">;</span>gem: <span class="p">&amp;</span>ndash<span class="p">;</span>user-install <span class="p">&amp;</span>ndash<span class="p">;</span>no-rdoc <span class="p">&amp;</span>ndash<span class="p">;</span>no-ri<span class="p">&amp;</span>rdquo<span class="p">;</span> &gt; ~/.gemrc&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Do not use the &lt;code&gt;--user-install&lt;/code&gt; option! This will install gems into &lt;code&gt;~/.gem&lt;/code&gt; dir and not into the rbenv   version specific folder!&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;echo <span class="p">&amp;</span>ldquo<span class="p">;</span>gem: <span class="p">&amp;</span>ndash<span class="p">;</span>no-rdoc <span class="p">&amp;</span>ndash<span class="p">;</span>no-ri<span class="p">&amp;</span>rdquo<span class="p">;</span> &gt; <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.gemrc&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Install bundler <span class="k">for</span> both installed versions.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;For 1.9.3&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;rbenv shell 1.9.3-p547
</span><span class='line'>gem install bundler&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;For 2.1.2&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;rbenv shell 2.1.2
</span><span class='line'>gem install bundler&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Leave rbenv shell&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;rbenv shell <span class="p">&amp;</span>ndash<span class="p">;</span><span class="nb">unset</span>
</span></code></pre></td></tr></table></div></figure></p>

<!--########################################-->


<h3>Gitlab Shell</h3>

<p>This is a replacement for gitolite.
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>git clone &lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;https://gitlab.com/gitlab-org/gitlab-shell.git&quot;</span>&gt;https://gitlab.com/gitlab-org/gitlab-shell.git&lt;/a&gt; <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab-shell
</span><span class='line'><span class="nb">cd</span> <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab-shell
</span><span class='line'>rbenv <span class="nb">local </span>2.1.2
</span><span class='line'>git fetch origin <span class="p">&amp;</span>amp<span class="p">;&amp;</span>amp<span class="p">;</span> git reset <span class="p">&amp;</span>ndash<span class="p">;</span>hard <span class="k">$(</span>git describe v1.9.6 <span class="o">||</span> git describe origin/v1.9.6<span class="k">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;cat &gt; <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab-shell/config.yml <span class="p">&amp;</span>lt<span class="p">;&amp;</span>lt<span class="p">;</span>&lt;strong&gt;EOF&lt;/strong&gt;&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;user: <span class="k">${</span><span class="nv">USER</span><span class="k">}</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;gitlab_url: &lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;http://gitlab.$&quot;</span>&gt;http://gitlab.<span class="nv">$&lt;</span>/a&gt;<span class="o">{</span>USER<span class="o">}</span>.<span class="k">$(</span>hostname -s<span class="k">)</span>.uberspace.de/&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;gitlab_url: &lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;http://$&quot;</span>&gt;http://<span class="nv">$&lt;</span>/a&gt;<span class="o">{</span>DOMAINNAME<span class="o">}</span>/&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;http_settings:&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;user: someone&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;password: somepass&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;ca_file: /etc/ssl/cert.pem&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;ca_path: /etc/pki/tls/certs&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  self_signed_cert: <span class="nb">false</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;repos_path: <span class="p">&amp;</span>ldquo<span class="p">;</span><span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/repositories/<span class="p">&amp;</span>rdquo<span class="p">;</span>
</span><span class='line'>auth_file: <span class="p">&amp;</span>ldquo<span class="p">;</span><span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.ssh/authorized_keys<span class="p">&amp;</span>rdquo<span class="p">;</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;redis:
</span><span class='line'>  bin: <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.toast/armed/bin/redis-cli
</span><span class='line'>  <span class="c"># host: 127.0.0.1</span>
</span><span class='line'>  <span class="c"># port: 6379</span>
</span><span class='line'>  socket: <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.redis/sock
</span><span class='line'>  <span class="c"># socket: /tmp/redis.socket # Only define this if you want to use sockets</span>
</span><span class='line'>  namespace: resque:gitlab&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Log file.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;log_file: <span class="p">&amp;</span>ldquo<span class="p">;</span><span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab-shell/gitlab-shell.log<span class="p">&amp;</span>rdquo<span class="p">;</span>
</span><span class='line'>log_level: INFO&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Audit usernames.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;audit_usernames: <span class="nb">false</span>
</span><span class='line'>&lt;strong&gt;EOF&lt;/strong&gt;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;./bin/install
</span></code></pre></td></tr></table></div></figure></p>

<p> If you use rbenv change system ruby path to your path.
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Change <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab-shell/hooks/update&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;#!/usr/bin/env ruby  -&gt;  <span class="c">#!${HOME}/.rbenv/shims/ruby&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Old: sed -i -e <span class="p">&amp;</span>ldquo<span class="p">;</span><span class="nv">s</span><span class="o">=</span><span class="se">\/</span>usr<span class="se">\/</span>bin<span class="se">\/</span>env <span class="nv">ruby</span><span class="o">=</span><span class="k">${</span><span class="nv">HOME</span><span class="k">}</span><span class="se">\/</span>.rbenv<span class="se">\/</span>shims<span class="se">\/</span><span class="nv">ruby</span><span class="o">=</span>g<span class="p">&amp;</span>rdquo<span class="p">;</span> <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab-shell/hooks/update&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;sed -i -e <span class="p">&amp;</span>ldquo<span class="p">;</span><span class="nv">s</span><span class="o">=</span><span class="se">\/</span>usr<span class="se">\/</span>bin<span class="se">\/</span>env <span class="nv">ruby</span><span class="o">=</span><span class="k">$(</span>which ruby<span class="k">)</span><span class="o">=</span>g<span class="p">&amp;</span>rdquo<span class="p">;</span> <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab-shell/hooks/update
</span></code></pre></td></tr></table></div></figure></p>

<!--########################################-->


<h3>Gitlab</h3>

<h4>Preparation</h4>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>git clone &lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;https://gitlab.com/gitlab-org/gitlab-ce.git&quot;</span>&gt;https://gitlab.com/gitlab-org/gitlab-ce.git&lt;/a&gt; -b 7-1-stable <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab
</span><span class='line'><span class="nb">cd</span> <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab
</span><span class='line'>rbenv <span class="nb">local </span>2.1.2&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Some folders&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;mkdir -p log
</span><span class='line'>mkdir -p tmp/pids
</span><span class='line'>mkdir -p tmp/sockets
</span><span class='line'>mkdir -p public/uploads&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Allow access to folders.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;chown -R <span class="k">${</span><span class="nv">USER</span><span class="k">}</span> log/
</span><span class='line'>chown -R <span class="k">${</span><span class="nv">USER</span><span class="k">}</span> tmp/
</span><span class='line'>chmod -R u+rwX <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/repositories
</span><span class='line'>chmod -R u+rwX log/
</span><span class='line'>chmod -R u+rwX tmp/
</span><span class='line'>chmod -R u+rwX tmp/pids/
</span><span class='line'>chmod -R u+rwX tmp/sockets/
</span><span class='line'>chmod -R u+rwX public/uploads&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;GitLab Satelittes.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;mkdir -p <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab-satellites
</span><span class='line'>chmod u+rwx,g<span class="o">=</span>rx,o-rwx <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab-satellites
</span></code></pre></td></tr></table></div></figure></p>

<h4>Config files</h4>

<ul>
<li>Why I don&rsquo;t post just the config files instead posting cat commands?</li>
<li>Well, you don&rsquo;t need to keep in mind to every thing you have to change. Run this commands and every thing should be fine.</li>
</ul>


<p><figure class='code'><figcaption><span>gitlab.yml </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
<span class='line-number'>164</span>
<span class='line-number'>165</span>
<span class='line-number'>166</span>
<span class='line-number'>167</span>
<span class='line-number'>168</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Configure the application main config file.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;cat &gt; config/gitlab.yml <span class="p">&amp;</span>lt<span class="p">;&amp;</span>lt<span class="p">;</span>&lt;strong&gt;EOF&lt;/strong&gt;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;# <span class="c"># # # # # # # # # # # # # # #&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;GitLab application config file&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;# <span class="c"># # # # # # # # # # # # # # #&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;p&gt;production: <span class="p">&amp;</span>amp<span class="p">;</span>base
</span><span class='line'>  <span class="c">#</span>
</span><span class='line'>  <span class="c"># 1. GitLab app settings</span>
</span><span class='line'>  <span class="c"># ==========================&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c">## GitLab settings</span>
</span><span class='line'>  gitlab:
</span><span class='line'>    <span class="c">## Web server settings (note: host is the FQDN, do not include &lt;a href=&quot;http://&quot;&gt;http://&lt;/a&gt;)</span>
</span><span class='line'>    host: <span class="k">${</span><span class="nv">DOMAINNAME</span><span class="k">}</span>
</span><span class='line'>    port: 80
</span><span class='line'>    &lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;https:&quot;</span>&gt;https:&lt;/a&gt; <span class="nb">true</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;user: <span class="k">${</span><span class="nv">USER</span><span class="k">}</span>
</span><span class='line'>email_from: <span class="k">${</span><span class="nv">USER</span><span class="k">}</span>@<span class="k">${</span><span class="nv">DOMAINNAME</span><span class="k">}</span>
</span><span class='line'>
</span><span class='line'><span class="c">## User settings</span>
</span><span class='line'>default_projects_limit: 10
</span><span class='line'><span class="c"># default_can_create_group: false  # default: true</span>
</span><span class='line'><span class="c"># username_changing_enabled: false # default: true - User can change her username/namespace</span>
</span><span class='line'><span class="c">## Default theme</span>
</span><span class='line'><span class="c">##   BASIC  = 1, MARS   = 2, MODERN = 3, GRAY   = 4, COLOR  = 5</span>
</span><span class='line'>default_theme: <span class="m">2</span> <span class="c"># default: 2</span>
</span><span class='line'>
</span><span class='line'><span class="c">## Users management</span>
</span><span class='line'><span class="c"># default: false - Account passwords are not sent via the email if signup is enabled.</span>
</span><span class='line'><span class="c"># signup_enabled: true</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># default: true - If set to false, standard login form won&#39;t be shown on the sign-in page</span>
</span><span class='line'><span class="c"># signin_enabled: false</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Restrict setting visibility levels for non-admin users.</span>
</span><span class='line'><span class="c"># The default is to allow all levels.</span>
</span><span class='line'><span class="c">#restricted_visibility_levels: [ &quot;public&quot; ]</span>
</span><span class='line'>
</span><span class='line'><span class="c">## Automatic issue closing</span>
</span><span class='line'><span class="c"># If a commit message matches this regular expression, all issues referenced from the matched text will be closed.</span>
</span><span class='line'><span class="c"># This happens when the commit is pushed or merged into the default branch of a project.</span>
</span><span class='line'><span class="c"># When not specified the default issue_closing_pattern as specified below will be used.</span>
</span><span class='line'><span class="c"># issue_closing_pattern: &#39;([Cc]lose[sd]|[Ff]ixe[sd]) #(\d+)&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="c">## Default project features settings</span>
</span><span class='line'>default_projects_features:
</span><span class='line'>  issues: <span class="nb">true</span>
</span><span class='line'><span class="nb">  </span>merge_requests: <span class="nb">true</span>
</span><span class='line'><span class="nb">  </span>wiki: <span class="nb">true</span>
</span><span class='line'><span class="nb">  </span>snippets: <span class="nb">false</span>
</span><span class='line'><span class="nb">  </span>visibility_level: <span class="s2">&quot;private&quot;</span>  <span class="c"># can be &quot;private&quot; | &quot;internal&quot; | &quot;public&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c">## Repository downloads directory</span>
</span><span class='line'><span class="c"># When a user clicks e.g. &#39;Download zip&#39; on a project, a temporary zip file is created in the following directory.</span>
</span><span class='line'><span class="c"># The default is &#39;tmp/repositories&#39; relative to the root of the Rails app.</span>
</span><span class='line'><span class="c"># repository_downloads_path: tmp/repositories</span>
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c">## External issues trackers</span>
</span><span class='line'>  issues_tracker:&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c">## Gravatar</span>
</span><span class='line'>  gravatar:
</span><span class='line'>    enabled: <span class="nb">true</span>                 <span class="c"># Use user avatar image from Gravatar.com (default: true)</span>
</span><span class='line'>    <span class="c"># gravatar urls: possible placeholders: %{hash} %{size} %{email}</span>
</span><span class='line'>    <span class="c"># plain_url: &amp;ldquo;&lt;a href=&quot;http://...&quot;&gt;http://&amp;#8230;&lt;/a&gt;&amp;rdquo;     # default: &lt;a href=&quot;http://www.gravatar.com/avatar/%&quot;&gt;http://www.gravatar.com/avatar/%&lt;/a&gt;{hash}?s=%{size}&amp;amp;d=identicon</span>
</span><span class='line'>    <span class="c"># ssl_url:   &amp;ldquo;&lt;a href=&quot;https://...&quot;&gt;https://&amp;#8230;&lt;/a&gt;&amp;rdquo;    # default: &lt;a href=&quot;https://secure.gravatar.com/avatar/%&quot;&gt;https://secure.gravatar.com/avatar/%&lt;/a&gt;{hash}?s=%{size}&amp;amp;d=identicon&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c">#</span>
</span><span class='line'>  <span class="c"># 2. Auth settings</span>
</span><span class='line'>  <span class="c"># ==========================&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c">## LDAP settings</span>
</span><span class='line'>  ldap:
</span><span class='line'>    enabled: <span class="nb">false</span>
</span><span class='line'><span class="nb">    </span>host: <span class="p">&amp;</span>lsquo<span class="p">;</span>&lt;em&gt;your_ldap_server<span class="p">&amp;</span>rsquo<span class="p">;</span>
</span><span class='line'>    port: 636
</span><span class='line'>    uid: <span class="p">&amp;</span>lsquo<span class="p">;</span>sAMAccountName<span class="p">&amp;</span>rsquo<span class="p">;</span>
</span><span class='line'>    method: <span class="p">&amp;</span>lsquo<span class="p">;</span>ssl<span class="p">&amp;</span>rsquo<span class="p">;</span> <span class="c"># &amp;ldquo;tls&amp;rdquo; or &amp;ldquo;ssl&amp;rdquo; or &amp;ldquo;plain&amp;rdquo;</span>
</span><span class='line'>    bind_dn: <span class="p">&amp;</span>lsquo<span class="p">;</span>&lt;/em&gt;the_full_dn_of_the_user_you_will_bind_with<span class="p">&amp;</span>rsquo<span class="p">;</span>
</span><span class='line'>    password: <span class="p">&amp;</span>lsquo<span class="p">;</span>_the_password_of_the_bind_user<span class="p">&amp;</span>rsquo<span class="p">;</span>
</span><span class='line'>    <span class="c"># If you are using &amp;ldquo;uid: &amp;lsquo;userPrincipalName&amp;rsquo;&amp;rdquo; on ActiveDirectory you need to</span>
</span><span class='line'>    <span class="c"># disable this setting, because the userPrincipalName contains an &amp;lsquo;@&amp;rsquo;.</span>
</span><span class='line'>    allow_username_or_email_login: <span class="nb">true</span>
</span><span class='line'><span class="nb">    </span>base: <span class="p">&amp;</span>lsquo<span class="p">;&amp;</span>rsquo<span class="p">;</span>
</span><span class='line'>    user_filter: <span class="p">&amp;</span>lsquo<span class="p">;&amp;</span>rsquo<span class="p">;</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c">## OmniAuth settings</span>
</span><span class='line'>  omniauth:
</span><span class='line'>    <span class="c"># Allow login via Twitter, Google, etc. using OmniAuth providers</span>
</span><span class='line'>    enabled: <span class="nb">false</span>
</span><span class='line'>    <span class="c"># CAUTION!</span>
</span><span class='line'>    <span class="c"># This allows users to login without having a user account first (default: false).</span>
</span><span class='line'>    <span class="c"># User accounts will be created automatically when authentication was successful.</span>
</span><span class='line'>    allow_single_sign_on: <span class="nb">false</span>
</span><span class='line'>    <span class="c"># Locks down those users until they have been cleared by the admin (default: true).</span>
</span><span class='line'>    block_auto_created_users: <span class="nb">true</span>
</span><span class='line'><span class="nb">    </span>providers:&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c">#</span>
</span><span class='line'>  <span class="c"># 3. Advanced settings</span>
</span><span class='line'>  <span class="c"># ==========================&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c"># GitLab Satellites</span>
</span><span class='line'>  satellites:
</span><span class='line'>    <span class="c"># Relative paths are relative to Rails.root (default: tmp/repo_satellites/)</span>
</span><span class='line'>    path: <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab-satellites/&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c">## Backup settings</span>
</span><span class='line'>  backup:
</span><span class='line'>    path: <span class="p">&amp;</span>ldquo<span class="p">;</span>tmp/backups<span class="p">&amp;</span>rdquo<span class="p">;</span>   <span class="c"># Relative paths are relative to Rails.root (default: tmp/backups/)</span>
</span><span class='line'>    <span class="c"># keep_time: 604800   # default: 0 (forever) (in seconds)&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c">## GitLab Shell settings</span>
</span><span class='line'>  gitlab_shell:
</span><span class='line'>    path: <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab-shell/&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;# REPOS_PATH MUST NOT BE A SYMLINK!!!
</span><span class='line'>repos_path: <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/repositories/
</span><span class='line'>hooks_path: <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab-shell/hooks/
</span><span class='line'>
</span><span class='line'><span class="c"># Git over HTTP</span>
</span><span class='line'>upload_pack: <span class="nb">true</span>
</span><span class='line'>receive_pack: <span class="nb">true</span>
</span><span class='line'>
</span><span class='line'><span class="c"># If you use non-standard ssh port you need to specify it</span>
</span><span class='line'><span class="c"># ssh_port: 22</span>
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c">## Git settings</span>
</span><span class='line'>  <span class="c"># CAUTION!</span>
</span><span class='line'>  <span class="c"># Use the default values unless you really know what you are doing</span>
</span><span class='line'>  git:
</span><span class='line'>    bin_path: <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.toast/armed/bin/git
</span><span class='line'>    <span class="c"># The next value is the maximum memory size grit can use</span>
</span><span class='line'>    <span class="c"># Given in number of bytes per git object (e.g. a commit)</span>
</span><span class='line'>    <span class="c"># This value can be increased if you have very large commits</span>
</span><span class='line'>    max_size: <span class="m">5242880</span> <span class="c"># 5.megabytes</span>
</span><span class='line'>    <span class="c"># Git timeout to read a commit, in seconds</span>
</span><span class='line'>    timeout: 10&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c">#</span>
</span><span class='line'>  <span class="c"># 4. Extra customization</span>
</span><span class='line'>  <span class="c"># ==========================&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  extra:
</span><span class='line'>    <span class="c">## Google analytics. Uncomment if you want it</span>
</span><span class='line'>    <span class="c"># google_analytics_id: &amp;lsquo;_your_tracking_id&amp;rsquo;&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;## Piwik analytics.
</span><span class='line'><span class="c"># piwik_url: &#39;_your_piwik_url&#39;</span>
</span><span class='line'><span class="c"># piwik_site_id: &#39;_your_piwik_site_id&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="c">## Text under sign-in page (Markdown enabled)</span>
</span><span class='line'><span class="c"># sign_in_text: |</span>
</span><span class='line'><span class="c">#   ![Company Logo](http://www.companydomain.com/logo.png)</span>
</span><span class='line'><span class="c">#   [Learn more about CompanyName](http://www.companydomain.com/)</span>
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;&lt;strong&gt;EOF&lt;/strong&gt;
</span></code></pre></td></tr></table></div></figure></p>

<p><figure class='code'><figcaption><span>unicorn.rb </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Configure Charlie the unicorn. <span class="p">;</span>-<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;cat &gt; config/unicorn.rb <span class="p">&amp;</span>lt<span class="p">;&amp;</span>lt<span class="p">;</span>&lt;strong&gt;EOF&lt;/strong&gt;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Sample verbose configuration file <span class="k">for</span> Unicorn <span class="o">(</span>not Rack<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;worker_processes 2&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;working_directory <span class="p">&amp;</span>ldquo<span class="p">;</span><span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab<span class="p">&amp;</span>rdquo<span class="p">;</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;listen <span class="p">&amp;</span>ldquo<span class="p">;</span>/home/hq/workspace/gitlab/tmp/sockets/gitlab.socket<span class="p">&amp;</span>rdquo<span class="p">;</span>, :backlog <span class="o">=</span>&gt; 64
</span><span class='line'>listen <span class="p">&amp;</span>ldquo<span class="p">;</span>127.0.0.1:<span class="k">${</span><span class="nv">INTERNPORT</span><span class="k">}</span><span class="p">&amp;</span>rdquo<span class="p">;</span>, :tcp_nopush <span class="o">=</span>&gt; <span class="nb">true</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;timeout 30&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;feel free to point this anywhere accessible on the filesystem&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;pid <span class="p">&amp;</span>ldquo<span class="p">;</span><span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab/tmp/pids/unicorn.pid<span class="p">&amp;</span>rdquo<span class="p">;</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;stderr_path <span class="p">&amp;</span>ldquo<span class="p">;</span><span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab/log/unicorn.stderr.log<span class="p">&amp;</span>rdquo<span class="p">;</span>
</span><span class='line'>stdout_path <span class="p">&amp;</span>ldquo<span class="p">;</span><span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab/log/unicorn.stdout.log<span class="p">&amp;</span>rdquo<span class="p">;</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;preload_app <span class="nb">true</span>
</span><span class='line'>GC.respond_to?<span class="o">(</span>:copy_on_write_friendly<span class="o">=)</span> and
</span><span class='line'>  GC.copy_on_write_friendly <span class="o">=</span> <span class="nb">true</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;check_client_connection <span class="nb">false</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;before_fork <span class="k">do</span> <span class="p">|</span>server, worker<span class="p">|</span>
</span><span class='line'>  defined?<span class="o">(</span>ActiveRecord::Base<span class="o">)</span> and
</span><span class='line'>    ActiveRecord::Base.connection.disconnect!&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="nv">old_pid</span> <span class="o">=</span> <span class="p">&amp;</span>ldquo<span class="p">;</span><span class="c">#{server.config[:pid]}.oldbin&amp;rdquo;</span>
</span><span class='line'>  <span class="k">if</span> old_pid !<span class="o">=</span> server.pid
</span><span class='line'>    begin
</span><span class='line'>      <span class="nv">sig</span> <span class="o">=</span> <span class="o">(</span>worker.nr + 1<span class="o">)</span> &gt;<span class="o">=</span> server.worker_processes ? :QUIT : :TTOU
</span><span class='line'>      Process.kill<span class="o">(</span>sig, File.read<span class="o">(</span>old_pid<span class="o">)</span>.to_i<span class="o">)</span>
</span><span class='line'>    rescue Errno::ENOENT, Errno::ESRCH
</span><span class='line'>    end
</span><span class='line'>  end
</span><span class='line'>  <span class="c"># sleep 1</span>
</span><span class='line'>end&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;after_fork <span class="k">do</span> <span class="p">|</span>server, worker<span class="p">|</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  defined?<span class="o">(</span>ActiveRecord::Base<span class="o">)</span> and
</span><span class='line'>    ActiveRecord::Base.establish_connection&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;end&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;&lt;strong&gt;EOF&lt;/strong&gt;
</span></code></pre></td></tr></table></div></figure></p>

<p><figure class='code'><figcaption><span>resque.yml </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Config Redis connection.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;cat &gt; config/resque.yml <span class="p">&amp;</span>lt<span class="p">;&amp;</span>lt<span class="p">;</span>&lt;strong&gt;EOF&lt;/strong&gt;
</span><span class='line'>development: redis://localhost:6379
</span><span class='line'><span class="nb">test</span>: redis://localhost:6379&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;production: redis://redis.example.com:6379&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;production: unix:<span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.redis/sock
</span><span class='line'>&lt;strong&gt;EOF&lt;/strong&gt;
</span></code></pre></td></tr></table></div></figure></p>

<p><figure class='code'><figcaption><span>rack_attack.rb </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Configure your rack.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;cp config/initializers/rack_attack.rb.example config/initializers/rack_attack.rb
</span></code></pre></td></tr></table></div></figure></p>

<p><figure class='code'><figcaption><span>production.rb </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Production environment.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;cp <span class="p">&amp;</span>ndash<span class="p">;</span>force config/environments/production.rb config/environments/production.rb.bak
</span><span class='line'>cat &gt; config/environments/production.rb <span class="p">&amp;</span>lt<span class="p">;&amp;</span>lt<span class="p">;</span>&lt;strong&gt;EOF&lt;/strong&gt;
</span><span class='line'>Gitlab::Application.configure <span class="k">do</span>
</span><span class='line'>  <span class="c"># Settings specified here will take precedence over those in config/application.rb&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c"># Code is not reloaded between requests</span>
</span><span class='line'>  config.cache_classes <span class="o">=</span> <span class="nb">true</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c"># Full error reports are disabled and caching is turned on</span>
</span><span class='line'>  config.consider_all_requests_local       <span class="o">=</span> <span class="nb">false</span>
</span><span class='line'><span class="nb">  </span>config.action_controller.perform_caching <span class="o">=</span> <span class="nb">true</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c"># Disable Rails&amp;rsquo;s static asset server (Apache or nginx will already do this)</span>
</span><span class='line'>  config.serve_static_assets <span class="o">=</span> <span class="nb">true</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c"># Compress JavaScripts and CSS</span>
</span><span class='line'>  config.assets.compress <span class="o">=</span> <span class="nb">true</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c"># Don&amp;rsquo;t fallback to assets pipeline if a precompiled asset is missed</span>
</span><span class='line'>  config.assets.compile <span class="o">=</span> <span class="nb">true</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c"># Generate digests for assets URLs</span>
</span><span class='line'>  config.assets.digest <span class="o">=</span> <span class="nb">true</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c"># Defaults to nil and saved in location specified by config.assets.prefix</span>
</span><span class='line'>  <span class="c"># config.assets.manifest = YOUR_PATH&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c"># Specifies the header that your server uses for sending files</span>
</span><span class='line'>  <span class="c"># config.action_dispatch.x_sendfile_header = &amp;ldquo;X-Sendfile&amp;rdquo; # for apache</span>
</span><span class='line'>  <span class="c"># config.action_dispatch.x_sendfile_header = &amp;lsquo;X-Accel-Redirect&amp;rsquo; # for nginx&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c"># Force all access to the app over SSL, use Strict-Transport-Security, and use secure cookies.</span>
</span><span class='line'>  <span class="c"># config.force_ssl = true&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c"># See everything in the log (default is :info)</span>
</span><span class='line'>  <span class="c"># config.log_level = :debug&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c"># Suppress &amp;lsquo;Rendered template &amp;hellip;&amp;rsquo; messages in the log</span>
</span><span class='line'>  <span class="c"># source: &lt;a href=&quot;http://stackoverflow.com/a/16369363&quot;&gt;http://stackoverflow.com/a/16369363&lt;/a&gt;</span>
</span><span class='line'>  %w<span class="o">{</span>render_template render_partial render_collection<span class="o">}</span>.each <span class="k">do</span> <span class="p">|</span>event<span class="p">|</span>
</span><span class='line'>    ActiveSupport::Notifications.unsubscribe <span class="p">&amp;</span>ldquo<span class="p">;</span><span class="c">#{event}.action_view&amp;rdquo;</span>
</span><span class='line'>  end&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c"># Prepend all log lines with the following tags</span>
</span><span class='line'>  <span class="c"># config.log_tags = [ :subdomain, :uuid ]&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c"># Use a different logger for distributed setups</span>
</span><span class='line'>  <span class="c"># config.logger = ActiveSupport::TaggedLogging.new(SyslogLogger.new)&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c"># Use a different cache store in production</span>
</span><span class='line'>  <span class="nv">config_file</span> <span class="o">=</span> Rails.root.join<span class="o">(</span><span class="p">&amp;</span>lsquo<span class="p">;</span>config<span class="p">&amp;</span>rsquo<span class="p">;</span>, <span class="p">&amp;</span>lsquo<span class="p">;</span>resque.yml<span class="p">&amp;</span>rsquo<span class="p">;</span><span class="o">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="nv">resque_url</span> <span class="o">=</span> <span class="k">if</span> File.exists?<span class="o">(</span>config_file<span class="o">)</span>
</span><span class='line'>                 YAML.load_file<span class="o">(</span>config_file<span class="o">)[</span>Rails.env<span class="o">]</span>
</span><span class='line'>               <span class="k">else</span>
</span><span class='line'>                 <span class="p">&amp;</span>ldquo<span class="p">;</span>redis://localhost:6379<span class="p">&amp;</span>rdquo<span class="p">;</span>
</span><span class='line'>               end
</span><span class='line'>  config.cache_store <span class="o">=</span> :redis_store, <span class="o">{</span>:url <span class="o">=</span>&gt; resque_url<span class="o">}</span>, <span class="o">{</span>namespace: <span class="p">&amp;</span>lsquo<span class="p">;</span>cache:gitlab<span class="p">&amp;</span>rsquo<span class="p">;</span><span class="o">}</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c"># Enable serving of images, stylesheets, and JavaScripts from an asset server</span>
</span><span class='line'>  <span class="c"># config.action_controller.asset_host = &amp;ldquo;&lt;a href=&quot;http://assets.example.com&quot;&gt;http://assets.example.com&lt;/a&gt;&amp;rdquo;&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c"># Precompile additional assets (application.js, application.css, and all non-JS/CSS are already added)</span>
</span><span class='line'>  <span class="c"># config.assets.precompile += %w( search.js )&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c"># Disable delivery errors, bad email addresses will be ignored</span>
</span><span class='line'>  <span class="c"># config.action_mailer.raise_delivery_errors = false&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c"># Enable threaded mode</span>
</span><span class='line'>  <span class="c"># config.threadsafe! unless $rails_rake_task&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c"># Enable locale fallbacks for I18n (makes lookups for any locale fall back to</span>
</span><span class='line'>  <span class="c"># the I18n.default_locale when a translation can not be found)</span>
</span><span class='line'>  config.i18n.fallbacks <span class="o">=</span> <span class="nb">true</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  <span class="c"># Send deprecation notices to registered listeners</span>
</span><span class='line'>  config.active_support.deprecation <span class="o">=</span> :notify&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  config.action_mailer.delivery_method <span class="o">=</span> :sendmail
</span><span class='line'>  <span class="c"># Defaults to:</span>
</span><span class='line'>  <span class="c"># # config.action_mailer.sendmail_settings = {</span>
</span><span class='line'>  <span class="c"># #   location: &amp;lsquo;/usr/sbin/sendmail&amp;rsquo;,</span>
</span><span class='line'>  <span class="c"># #   arguments: &amp;lsquo;-i -t&amp;rsquo;</span>
</span><span class='line'>  <span class="c"># # }</span>
</span><span class='line'>  config.action_mailer.perform_deliveries <span class="o">=</span> <span class="nb">true</span>
</span><span class='line'><span class="nb">  </span>config.action_mailer.raise_delivery_errors <span class="o">=</span> <span class="nb">true</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  config.eager_load <span class="o">=</span> <span class="nb">true</span>
</span><span class='line'><span class="nb">  </span>config.assets.js_compressor <span class="o">=</span> :uglifier&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;  config.allow_concurrency <span class="o">=</span> <span class="nb">false</span>
</span><span class='line'>end
</span><span class='line'>&lt;strong&gt;EOF&lt;/strong&gt;
</span></code></pre></td></tr></table></div></figure></p>

<h4>Database configuration</h4>

<p><figure class='code'><figcaption><span>Be carefull with &ldquo;DROP DATABASE&rdquo; commands! </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Be carefull with <span class="p">&amp;</span>ldquo<span class="p">;</span>DROP DATABASE<span class="p">&amp;</span>rdquo<span class="p">;</span> commands!&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;mysql -e <span class="p">&amp;</span>ldquo<span class="p">;</span>DROP DATABASE <span class="k">${</span><span class="nv">USER</span><span class="k">}</span>&lt;em&gt;gitlab<span class="p">;&amp;</span>rdquo<span class="p">;</span>
</span><span class='line'>mysql -e <span class="p">&amp;</span>ldquo<span class="p">;</span>CREATE DATABASE <span class="k">${</span><span class="nv">USER</span><span class="k">}</span>&lt;/em&gt;gitlab CHARACTER SET utf8<span class="p">&amp;</span>rdquo<span class="p">;</span>
</span><span class='line'>cat &gt; <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab/config/database.yml <span class="p">&amp;</span>lt<span class="p">;&amp;</span>lt<span class="p">;</span>&lt;strong&gt;EOF&lt;/strong&gt;
</span><span class='line'>production:
</span><span class='line'>  adapter: mysql2
</span><span class='line'>  encoding: utf8
</span><span class='line'>  reconnect: <span class="nb">false</span>
</span><span class='line'><span class="nb">  </span>database: <span class="k">${</span><span class="nv">USER</span><span class="k">}</span>_gitlab
</span><span class='line'>  pool: 10
</span><span class='line'>  username: <span class="k">${</span><span class="nv">USER</span><span class="k">}</span>
</span><span class='line'>  password: &lt;code&gt;my_print_defaults client <span class="p">|</span> grep -- --password <span class="p">|</span> awk -F <span class="o">=</span> <span class="s1">&#39;{ print $2 }&#39;</span>&lt;/code&gt;
</span><span class='line'>  <span class="c"># host: localhost</span>
</span><span class='line'>  <span class="c"># socket: /tmp/mysql.sock</span>
</span><span class='line'>&lt;strong&gt;EOF&lt;/strong&gt;
</span><span class='line'>chmod o-rwx <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab/config/database.yml
</span></code></pre></td></tr></table></div></figure></p>

<h4>Installation</h4>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nb">cd</span> <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;CentOS 5? cat /etc/*-release&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Then <span class="k">do</span> also: bundle config build.charlock_holmes <span class="p">&amp;</span>ndash<span class="p">;</span>with-icu-dir<span class="o">=</span>/package/host/localhost/icu4c&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;bundle install <span class="p">&amp;</span>ndash<span class="p">;</span>deployment <span class="p">&amp;</span>ndash<span class="p">;</span>without development <span class="nb">test </span>postgres aws&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Be sure, redis is running and a database exists before doing the setup.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;bundle <span class="nb">exec </span>rake gitlab:setup <span class="nv">RAILS_ENV</span><span class="o">=</span>production&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Answer with <span class="p">&amp;</span>lsquo<span class="p">;</span>yes<span class="p">&amp;</span>rsquo<span class="p">;</span> to create db tables.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Ends with:&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="p">&amp;</span>hellip<span class="p">;</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Administrator account created:&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;login<span class="p">&amp;</span>hellip<span class="p">;&amp;</span>hellip<span class="p">;&amp;</span>hellip<span class="p">;</span>root&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;password<span class="p">&amp;</span>hellip<span class="p">;&amp;</span>hellip<span class="p">;</span>5iveL!fe&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></p>

<h4>Initscript</h4>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Be aware, this starter is not good to use with Uberspace service.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Default variables file.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;mkdir -p <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/etc/default
</span><span class='line'>cat &gt; <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/etc/default/gitlab.default <span class="p">&amp;</span>lt<span class="p">;&amp;</span>lt<span class="p">;</span>&lt;strong&gt;EOF&lt;/strong&gt;
</span><span class='line'><span class="nv">RAILS_ENV</span><span class="o">=</span><span class="p">&amp;</span>ldquo<span class="p">;</span>production<span class="p">&amp;</span>rdquo<span class="p">;</span>
</span><span class='line'><span class="nv">app_user</span><span class="o">=</span><span class="p">&amp;</span>ldquo<span class="p">;</span><span class="k">${</span><span class="nv">USER</span><span class="k">}</span><span class="p">&amp;</span>rdquo<span class="p">;</span>
</span><span class='line'><span class="nv">app_root</span><span class="o">=</span><span class="p">&amp;</span>ldquo<span class="p">;</span><span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab<span class="p">&amp;</span>rdquo<span class="p">;</span>
</span><span class='line'><span class="nv">pid_path</span><span class="o">=</span><span class="p">&amp;</span>ldquo<span class="p">;</span><span class="se">\$</span>app_root/tmp/pids<span class="p">&amp;</span>rdquo<span class="p">;</span>
</span><span class='line'><span class="nv">socket_path</span><span class="o">=</span><span class="p">&amp;</span>ldquo<span class="p">;</span><span class="se">\$</span>app_root/tmp/sockets<span class="p">&amp;</span>rdquo<span class="p">;</span>
</span><span class='line'><span class="nv">web_server_pid_path</span><span class="o">=</span><span class="p">&amp;</span>ldquo<span class="p">;</span><span class="se">\$</span>pid_path/unicorn.pid<span class="p">&amp;</span>rdquo<span class="p">;</span>
</span><span class='line'><span class="nv">sidekiq_pid_path</span><span class="o">=</span><span class="p">&amp;</span>ldquo<span class="p">;</span><span class="se">\$</span>pid_path/sidekiq.pid<span class="p">&amp;</span>rdquo<span class="p">;</span>
</span><span class='line'>&lt;strong&gt;EOF&lt;/strong&gt;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;GitLab starter.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;cp -f <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/workspace/gitlab/lib/support/init.d/gitlab <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/bin/gitlab
</span><span class='line'>chmod +x <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/bin/gitlab&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Change to <span class="p">&amp;</span>lsquo<span class="p">;</span><span class="nb">read</span> <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/etc/default/gitlab.default<span class="p">&amp;</span>rsquo<span class="p">;</span>.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;sed -i -e <span class="p">&amp;</span>rsquo<span class="p">;</span><span class="nv">s</span><span class="o">=</span><span class="se">\/</span>etc<span class="se">\/</span>default<span class="se">\/</span><span class="nv">gitlab</span><span class="o">=</span><span class="k">${</span><span class="nv">HOME</span><span class="k">}</span><span class="se">\/</span>etc<span class="se">\/</span>default<span class="se">\/</span>gitlab.default<span class="o">=</span>g<span class="p">&amp;</span><span class="c">#8217; ${HOME}/bin/gitlab</span>
</span></code></pre></td></tr></table></div></figure></p>

<h4>Redirection to the service port</h4>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Configure web.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;mkdir -p /var/www/virtual/<span class="k">${</span><span class="nv">USER</span><span class="k">}</span>/<span class="k">${</span><span class="nv">DOMAINNAME</span><span class="k">}</span>
</span><span class='line'>cat &gt; /var/www/virtual/<span class="k">${</span><span class="nv">USER</span><span class="k">}</span>/<span class="k">${</span><span class="nv">DOMAINNAME</span><span class="k">}</span>/.htaccess <span class="p">&amp;</span>lt<span class="p">;</span>&lt;__EOF__
</span><span class='line'>&lt;IfModule mod_rewrite.c&gt;
</span><span class='line'>  RewriteEngine On
</span><span class='line'>  RewriteBase /
</span><span class='line'>  RewriteRule ^<span class="o">(</span>.*<span class="o">)</span><span class="nv">$ </span>&lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;http://localhost:$&quot;</span>&gt;http://localhost:<span class="nv">$&lt;</span>/a&gt;<span class="o">{</span>INTERNPORT<span class="o">}</span>/<span class="se">\$</span><span class="m">1</span> <span class="o">[</span>P<span class="o">]</span>
</span><span class='line'>&lt;/IfModule&gt;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Agains <span class="p">&amp;</span>ldquo<span class="p">;</span>Can<span class="p">&amp;</span>rsquo<span class="p">;</span>t verify CSRF token authenticity<span class="p">&amp;</span>rdquo<span class="p">;</span> error.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;RequestHeader <span class="nb">set </span>X-Forwarded-Proto https
</span><span class='line'>&lt;strong&gt;EOF&lt;/strong&gt;
</span></code></pre></td></tr></table></div></figure></p>

<h4>Check installation</h4>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Last check.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;cd <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/workspace/gitlab
</span><span class='line'>bundle <span class="nb">exec </span>rake gitlab:env:info <span class="nv">RAILS_ENV</span><span class="o">=</span>production
</span><span class='line'>bundle <span class="nb">exec </span>rake gitlab:check <span class="nv">RAILS_ENV</span><span class="o">=</span>production&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;If everything was fine, we kann build the assets.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;bundle <span class="nb">exec </span>rake assets:precompile <span class="nv">RAILS_ENV</span><span class="o">=</span>production
</span></code></pre></td></tr></table></div></figure></p>

<h4>Start</h4>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;This is <span class="k">for</span> what we<span class="p">&amp;</span>rsquo<span class="p">;</span>ve <span class="k">done</span> all this stuff above.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;cd
</span><span class='line'>gitlab start&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;<span class="o">[</span>start, stop, restart, status<span class="o">]</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></p>

<!--########################################-->


<h3>Local SSH config</h3>

<p><figure class='code'><figcaption><span>ON YOUR LOCAL MACHINE !!! </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h3&gt;CONFIGURE ON YOUR LOCAL MACHINE, not at your Gitlab server!&lt;/h3&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;DOMAINNAME<span class="o">=</span><span class="p">&amp;</span>ldquo<span class="p">;</span>gitlab.example.com<span class="p">&amp;</span>rdquo<span class="p">;</span>
</span><span class='line'>mkdir -p <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.ssh
</span><span class='line'><span class="nb">cd</span> <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.ssh&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;ssh-keygen -t rsa -f git_rsa -C <span class="p">&amp;</span>ldquo<span class="p">;</span>Git Key<span class="p">&amp;</span>rdquo<span class="p">;</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Enter no passphrase, or not.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Configure ssh <span class="k">for</span> your domains.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;touch <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.ssh/config
</span><span class='line'>chmod <span class="m">600</span> <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.ssh/config&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Add.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;cat &gt;&gt; <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.ssh/config <span class="p">&amp;</span>lt<span class="p">;&amp;</span>lt<span class="p">;</span>&lt;strong&gt;EOF&lt;/strong&gt;
</span><span class='line'>Host <span class="k">${</span><span class="nv">DOMAINNAME</span><span class="k">}</span>
</span><span class='line'>    Hostname <span class="k">${</span><span class="nv">DOMAINNAME</span><span class="k">}</span>
</span><span class='line'>    IdentityFile ~/.ssh/git_rsa
</span><span class='line'>    IdentitiesOnly yes
</span><span class='line'>&lt;strong&gt;EOF&lt;/strong&gt;
</span></code></pre></td></tr></table></div></figure></p>

<h2>Upgrade</h2>

<ul>
<li>There is a <a href="https://gitlab.com/gitlab-org/gitlab-ce/blob/master/doc/update/upgrader.md">script</a> for that.</li>
<li>First shutdown all services:

<ul>
<li>gitlab</li>
<li>redis
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nb">cd</span> <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab
</span><span class='line'>bundle <span class="nb">exec </span>ruby bin/upgrade.rb
</span><span class='line'>gitlab start
</span><span class='line'>bundle <span class="nb">exec </span>rake gitlab:check <span class="nv">RAILS_ENV</span><span class="o">=</span>production
</span></code></pre></td></tr></table></div></figure></li>
</ul>
</li>
</ul>


<p>Or you do it manually:
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nb">cd</span> <span class="k">${</span><span class="nv">WORKSPACE</span><span class="k">}</span>/gitlab
</span><span class='line'>git stash
</span><span class='line'>git fetch&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Be aware, this will also use RC versions:&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;git checkout <span class="k">$(</span>git tag -l <span class="p">|</span> tail -1<span class="k">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;git tag -l
</span><span class='line'>git branch -a
</span><span class='line'>git checkout 7-1-stable
</span><span class='line'>bundle
</span><span class='line'>bundle <span class="nb">exec </span>rake db:migrate
</span><span class='line'>bundle <span class="nb">exec </span>rake assets:clean assets:precompile
</span><span class='line'>bundle <span class="nb">exec </span>rake cache:clear
</span></code></pre></td></tr></table></div></figure></p>

<h2>Uninstallation</h2>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>rm -rf <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/workspace/gitlab
</span><span class='line'>rm -rf <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/workspace/gitlab-shell
</span><span class='line'>rm -rf <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/workspace/gitlab-satellites
</span></code></pre></td></tr></table></div></figure></p>

<h2>Issues</h2>

<ul>
<li>Get double emails.</li>
<li>Initial git push errors.

<ul>
<li>change your repo adress

<ul>
<li><code>git remote add origin user@gitlab.example.com:gituser/repo.git</code></li>
<li>to:</li>
<li><code>git remote add origin user@gitlab.example.com:path-to-repositories-dir-relative-from-user-home-dir/gituser/repo.git</code></li>
</ul>
</li>
</ul>
</li>
<li>hook error

<ul>
<li>change in github-shell/hooks/update</li>
<li><code>#!/usr/bin/env ruby</code> to <code>#!/home/&lt;user&gt;/.rbenv/shims/ruby</code></li>
<li>-> Edit install script using $(which ruby)</li>
</ul>
</li>
<li>You are not allowed to access master! remote: error: hook declined to update refs/heads/master</li>
<li>In gitlab/config/gitlab.yml email_from has to include your uberspace username</li>
<li>email_from: <a href="&#x6d;&#97;&#x69;&#108;&#x74;&#111;&#58;&#117;&#115;&#x65;&#114;&#64;&#x67;&#105;&#116;&#x6c;&#x61;&#x62;&#x2e;&#x65;&#120;&#x61;&#109;&#112;&#x6c;&#101;&#46;&#x63;&#111;&#109;">&#117;&#x73;&#101;&#x72;&#64;&#103;&#x69;&#116;&#108;&#x61;&#x62;&#46;&#101;&#120;&#x61;&#109;&#x70;&#108;&#x65;&#46;&#x63;&#111;&#109;</a></li>
<li>LoadError: cannot load such file &ndash; rb-inotify

<ul>
<li>Add <code>RAILS_ENV=production</code> to your command. E.g.: bundle exec rake cache:clear RAILS_ENV=production</li>
</ul>
</li>
<li>rake aborted! Redis::CannotConnectError: Error connecting to Redis on 127.0.0.1:6379 (ECONNREFUSED)

<ul>
<li>Stop Gitlab and then start sidekiq first</li>
<li>gitlab stop</li>
<li>bundle exec rake sidekiq:start RAILS_ENV=production</li>
</ul>
</li>
<li>bundle exec rake ./bin/upgrade.rb

<ul>
<li>Maybe during the upgrade process some folder right get wrong</li>
</ul>
</li>
<li>bundle exec rake cache:clear RAILS_ENV=production

<ul>
<li>Have the tmp folde the correct rights?</li>
</ul>
</li>
</ul>


<h2>Sources</h2>

<ul>
<li><a href="https://wiki.uberspace.de/cool?s[]=gitlab">wiki.uberspace.de/cool</a></li>
<li><a href="https://blog.kanedo.net/1925,gitlab-7-0-auf-einem-uberspace-installieren.html">kanedo - Gitlab 7.0 auf einem Uberspace installieren</a></li>
<li><a href="https://ricwein.com/ricwein/uberspacetutorial/tree/7-0-stable">Richard Weinhold / HowTo install Gitlab at Uberspace</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Redmine Installation (with rbenv)]]></title>
    <link href="http://leitstelle.github.io/blog/2014/2014-07-04-redmine-with-rbenv/"/>
    <updated>2014-07-04T15:33:00+02:00</updated>
    <id>http://leitstelle.github.io/blog/2014/redmine-with-rbenv</id>
    <content type="html"><![CDATA[<h2>About</h2>

<p>Installation von Redmine 2.5 auf einem Uberspace-Account unter Benutzung von rbenv mit einer eigenen Domain.</p>

<h2>tl;dr</h2>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>wget -O <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/redmine-2.5-install-on-rbenv.sh &lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;https://leitstelle.github.io/downloads/code/2014/redmine-2.5-install-on-rbenv.sh&quot;</span>&gt;https://leitstelle.github.io/downloads/code/2014/redmine-2.5-install-on-rbenv.sh&lt;/a&gt;
</span><span class='line'>chmod u+x <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/redmine-2.5-install-on-rbenv.sh
</span><span class='line'><span class="nb">cd</span> <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>
</span><span class='line'>sed -i -e <span class="p">&amp;</span>rsquo<span class="p">;</span>s/DOMAINNAME<span class="o">=</span><span class="p">&amp;</span>ldquo<span class="p">;</span>redmine.example.com<span class="p">&amp;</span>rdquo<span class="p">;</span>/DOMAINNAME<span class="o">=</span><span class="p">&amp;</span>ldquo<span class="p">;</span>redmine.yourdomain.net<span class="p">&amp;</span>rdquo<span class="p">;</span>/g<span class="p">&amp;</span><span class="c">#8217; redmine-2.5-install-on-rbenv.sh</span>
</span><span class='line'>./redmine-2.5-install-on-rbenv.sh
</span></code></pre></td></tr></table></div></figure></p>

<h2>Konfiguration</h2>

<ul>
<li>Uberspace-Username -> ${USER}, <ubername> oder user</li>
<li>Uberspace-Severname -> $(hostname -a), <uberhost>, <hostname> oder host</li>
<li>/var/www/virtual/${USER}/redmine

<ul>
<li>Dort wird Redmine hinein installiert, damit der Unterordner <code>/var/www/virtual/${USER}/redmine/public</code> von auÃŸen Ã¼ber den Symlink <code>ln -s ./redmine/public redmine.example.com</code> erreichbar ist.</li>
</ul>
</li>
</ul>


<h2>Installation</h2>

<p><figure class='code'><figcaption><span> (redmine-2.5-install-on-rbenv.sh)</span> <a href='/downloads/code/2014/redmine-2.5-install-on-rbenv.sh'>download</a></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
<span class='line-number'>164</span>
<span class='line-number'>165</span>
<span class='line-number'>166</span>
<span class='line-number'>167</span>
<span class='line-number'>168</span>
<span class='line-number'>169</span>
<span class='line-number'>170</span>
<span class='line-number'>171</span>
<span class='line-number'>172</span>
<span class='line-number'>173</span>
<span class='line-number'>174</span>
<span class='line-number'>175</span>
<span class='line-number'>176</span>
<span class='line-number'>177</span>
<span class='line-number'>178</span>
<span class='line-number'>179</span>
<span class='line-number'>180</span>
<span class='line-number'>181</span>
<span class='line-number'>182</span>
<span class='line-number'>183</span>
<span class='line-number'>184</span>
<span class='line-number'>185</span>
<span class='line-number'>186</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c">#!/usr/bin/env bash</span>
</span><span class='line'><span class="nb">echo</span> -e <span class="s2">&quot;\e[0;45mInstallation of Redmine 2.5.\e[0m&quot;</span>
</span><span class='line'><span class="nb">cd</span>
</span><span class='line'>
</span><span class='line'><span class="c">################################################################################</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Subfolder or subdomain?</span>
</span><span class='line'><span class="nv">SUBFOLDER</span><span class="o">=</span><span class="nb">false</span>
</span><span class='line'><span class="nv">DOMAINNAME</span><span class="o">=</span><span class="s2">&quot;redmine.example.com&quot;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c"># rbenv.</span>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> -f <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.rbenv <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>	<span class="nb">echo</span> <span class="s2">&quot;~/.rbenv exists. So I assume rbenv is correctly installed. Here is nothing to do.&quot;</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'>    	<span class="nb">echo</span> <span class="s2">&quot;~/.rbenv does not exist. So I install and configure it. This will need some time.&quot;</span>
</span><span class='line'>	<span class="nb">cd</span> <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>
</span><span class='line'>	wget -O <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/rbenv-install.sh https://leitstelle.github.io/downloads/code/2014/rbenv-install.sh
</span><span class='line'>	chmod u+x rbenv-install.sh
</span><span class='line'>	./rbenv-install.sh
</span><span class='line'>	. <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.bash_profile
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Ruby.</span>
</span><span class='line'>rbenv install -s 2.1.2
</span><span class='line'>rbenv rehash
</span><span class='line'>
</span><span class='line'><span class="c"># Apache readable directory, but not html doc folder</span>
</span><span class='line'>/var/www/virtual/<span class="k">${</span><span class="nv">USER</span><span class="k">}</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Check existing repository.</span>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> -d redmine-git <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>	<span class="nb">echo</span> <span class="s2">&quot;Source directory redmine-git exists. Updateing and copying data from there.&quot;</span>
</span><span class='line'>	<span class="nb">cd </span>redmine-git
</span><span class='line'>	git pull
</span><span class='line'><span class="k">else</span>
</span><span class='line'>	.
</span><span class='line'>    	git clone https://github.com/redmine/redmine.git -b 2.5-stable redmine-git
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'><span class="c">## Checkout stable version.</span>
</span><span class='line'><span class="c">#cd /var/www/virtual/$USER/redmine-git</span>
</span><span class='line'><span class="c">#git checkout 2.5-stable</span>
</span><span class='line'><span class="c">#cd ..</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Clear existing redmine installation.</span>
</span><span class='line'>rm -Rf redmine <span class="o">&amp;&amp;</span> mkdir -p redmine
</span><span class='line'>cp -R redmine-git/* redmine/
</span><span class='line'>
</span><span class='line'><span class="c"># REDMINE DIR.</span>
</span><span class='line'><span class="nb">cd </span>redmine
</span><span class='line'>rbenv <span class="nb">local </span>2.1.2
</span><span class='line'>
</span><span class='line'><span class="c"># Install bundler for local rbenv version, if not already done.</span>
</span><span class='line'>gem install bundler
</span><span class='line'>rbenv rehash
</span><span class='line'>
</span><span class='line'><span class="c"># Add fcgi to gem installation.</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;gem &#39;fcgi&#39;&quot;</span> &gt; Gemfile.local
</span><span class='line'>
</span><span class='line'><span class="c"># Create MySQL database.</span>
</span><span class='line'><span class="c"># Be carefully to drop : </span>
</span><span class='line'>mysql -e <span class="s2">&quot;DROP DATABASE ${USER}_redmine;&quot;</span>
</span><span class='line'>mysql -e <span class="s2">&quot;CREATE DATABASE ${USER}_redmine CHARACTER SET utf8&quot;</span>
</span><span class='line'>
</span><span class='line'>cat &gt; config/database.yml <span class="s">&lt;&lt;__EOF__</span>
</span><span class='line'><span class="s">production:</span>
</span><span class='line'><span class="s">  adapter: mysql2</span>
</span><span class='line'><span class="s">  database: ${USER}_redmine</span>
</span><span class='line'><span class="s">  host: localhost</span>
</span><span class='line'><span class="s">  username: $USER</span>
</span><span class='line'><span class="s">  password: `my_print_defaults client | grep -- --password | awk -F = &#39;{ print $2 }&#39;`</span>
</span><span class='line'><span class="s">  encoding: utf8</span>
</span><span class='line'><span class="s">__EOF__</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Install dependencies.</span>
</span><span class='line'><span class="c"># Old: bundle install --path ~/.gem --without development test postgresql sqlite</span>
</span><span class='line'><span class="c"># Do not use `--path ~/.gem` this is not compatible with rbenv!</span>
</span><span class='line'>bundle install --without development <span class="nb">test </span>postgresql sqlite
</span><span class='line'>rbenv rehash
</span><span class='line'>
</span><span class='line'><span class="c"># Generate key.</span>
</span><span class='line'>rake generate_secret_token
</span><span class='line'>
</span><span class='line'><span class="c"># Migrate database. Creates also admin account.</span>
</span><span class='line'>rake db:migrate <span class="nv">RAILS_ENV</span><span class="o">=</span>production
</span><span class='line'>
</span><span class='line'><span class="c"># Load default configuration.</span>
</span><span class='line'>rake redmine:load_default_data <span class="nv">RAILS_ENV</span><span class="o">=</span>production
</span><span class='line'><span class="c"># 	Select your prefered langugae.</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Configure to send emails.</span>
</span><span class='line'>cat &gt; config/configuration.yml <span class="s">&lt;&lt;__EOF__</span>
</span><span class='line'><span class="s">production:</span>
</span><span class='line'><span class="s">  email_delivery:</span>
</span><span class='line'><span class="s">    delivery_method: :sendmail</span>
</span><span class='line'><span class="s">__EOF__</span>
</span><span class='line'>
</span><span class='line'><span class="c"># FastCGI.</span>
</span><span class='line'><span class="nb">cd </span>public
</span><span class='line'>cp -a dispatch.fcgi.example dispatch.fcgi
</span><span class='line'><span class="c"># FastCGI wrapper.</span>
</span><span class='line'>cat &gt; wrapper.fcgi <span class="s">&lt;&lt;__EOF__</span>
</span><span class='line'><span class="s">#!/bin/bash</span>
</span><span class='line'><span class="s">export USER=$USER</span>
</span><span class='line'><span class="s">export HOME=$HOME</span>
</span><span class='line'><span class="s">source \$HOME/.bash_profile</span>
</span><span class='line'><span class="s">export RAILS_ENV=production</span>
</span><span class='line'><span class="s">exec ./dispatch.fcgi</span>
</span><span class='line'><span class="s">__EOF__</span>
</span><span class='line'>chmod <span class="m">755</span> wrapper.fcgi
</span><span class='line'>
</span><span class='line'><span class="c"># Make public directory readable.</span>
</span><span class='line'>chmod <span class="m">755</span> .
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c">### SUBFOLDER OR SUBDOMAIN? ###</span>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;${SUBFOLDER}&quot;</span> <span class="o">=</span> <span class="nb">true</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>	<span class="c"># SUBFOLDER</span>
</span><span class='line'>	<span class="nb">echo</span> <span class="s2">&quot;Configure for usage of redmine in a subfolder.&quot;</span>
</span><span class='line'>	<span class="nb">cd</span> /var/www/virtual/<span class="nv">$USER</span>/redmine
</span><span class='line'>	<span class="nb">echo</span> <span class="s1">&#39;Redmine::Utils::relative_url_root = &quot;/redmine&quot;&#39;</span> &gt;&gt; config/environment.rb
</span><span class='line'>	<span class="c"># Bugfix</span>
</span><span class='line'>	sed -i -e <span class="s2">&quot;s/^# Initialize the rails application/RedmineApp::Application.routes.default_scope = { :path =&gt; &#39;\/redmine&#39;, :shallow_path =&gt; &#39;\/redmine&#39; }\n\n# Initialize the rails application/&quot;</span> config/environment.rb
</span><span class='line'>
</span><span class='line'>	<span class="c"># Create link.</span>
</span><span class='line'>	<span class="nb">cd</span> /var/www/virtual/<span class="nv">$USER</span>/html
</span><span class='line'>	ln -s ../redmine/public redmine
</span><span class='line'>	
</span><span class='line'>	<span class="c"># &#39;.htaccess&#39;</span>
</span><span class='line'>	cat &gt; .htaccess <span class="s">&lt;&lt;&#39;__EOF__&#39;</span>
</span><span class='line'><span class="s">	&lt;IfModule mod_fastcgi.c&gt;</span>
</span><span class='line'><span class="s">	        AddHandler fastcgi-script .fcgi</span>
</span><span class='line'><span class="s">	&lt;/IfModule&gt;</span>
</span><span class='line'><span class="s">	&lt;IfModule mod_fcgid.c&gt;</span>
</span><span class='line'><span class="s">	        AddHandler fcgid-script .fcgi</span>
</span><span class='line'><span class="s">	&lt;/IfModule&gt;</span>
</span><span class='line'><span class="s">	Options + SymLinksIfOwnerMatch +ExecCGI</span>
</span><span class='line'><span class="s">	 </span>
</span><span class='line'><span class="s">	RewriteEngine On</span>
</span><span class='line'><span class="s">	 </span>
</span><span class='line'><span class="s">	RewriteRule ^$ index.html [QSA]</span>
</span><span class='line'><span class="s">	RewriteRule ^([^.]+)$ $1.html [QSA]</span>
</span><span class='line'><span class="s">	RewriteCond %{REQUEST_FILENAME} !-f</span>
</span><span class='line'><span class="s">	RewriteRule ^(.*)$ wrapper.fcgi [QSA,L]</span>
</span><span class='line'><span class="s">	 </span>
</span><span class='line'><span class="s">	ErrorDocument 500 &quot;&lt;h2&gt;Application error&lt;/h2&gt;Rails application failed to start properly&quot;</span>
</span><span class='line'><span class="s">	__EOF__</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'>	<span class="c"># SUBDOMAIN</span>
</span><span class='line'>	<span class="nb">echo</span> <span class="s2">&quot;Configure for usage of redmine in a subdomain.&quot;</span>
</span><span class='line'>	<span class="c"># &#39;.htaccess&#39;.</span>
</span><span class='line'>	<span class="nb">cd</span> /var/www/virtual/<span class="nv">$USER</span>/redmine/public
</span><span class='line'>	cat &gt; .htaccess <span class="s">&lt;&lt;&#39;__EOF__&#39;</span>
</span><span class='line'><span class="s">	&lt;IfModule mod_fastcgi.c&gt;</span>
</span><span class='line'><span class="s">	        AddHandler fastcgi-script .fcgi</span>
</span><span class='line'><span class="s">	&lt;/IfModule&gt;</span>
</span><span class='line'><span class="s">	&lt;IfModule mod_fcgid.c&gt;</span>
</span><span class='line'><span class="s">	        AddHandler fcgid-script .fcgi</span>
</span><span class='line'><span class="s">	&lt;/IfModule&gt;</span>
</span><span class='line'><span class="s">	Options +SymLinksIfOwnerMatch +ExecCGI</span>
</span><span class='line'><span class="s">	 </span>
</span><span class='line'><span class="s">	RewriteEngine On</span>
</span><span class='line'><span class="s">	RewriteBase /</span>
</span><span class='line'><span class="s">	 </span>
</span><span class='line'><span class="s">	# http:// -&gt; https://</span>
</span><span class='line'><span class="s">	RewriteCond %{SERVER_PORT} 80</span>
</span><span class='line'><span class="s">	RewriteRule ^(.*)$ https://%{HTTP_HOST}/$1 [R,L]</span>
</span><span class='line'><span class="s">	</span>
</span><span class='line'><span class="s">	RewriteRule ^$ index.html [QSA]</span>
</span><span class='line'><span class="s">	RewriteRule ^([^.]+)$ $1.html [QSA]</span>
</span><span class='line'><span class="s">	RewriteCond %{REQUEST_FILENAME} !-f</span>
</span><span class='line'><span class="s">	RewriteRule ^(.*)$ wrapper.fcgi [QSA,L]</span>
</span><span class='line'><span class="s">	 </span>
</span><span class='line'><span class="s">	ErrorDocument 500 &quot;&lt;h2&gt;Application error&lt;/h2&gt;Rails application failed to start properly&quot;</span>
</span><span class='line'><span class="s">	__EOF__</span>
</span><span class='line'>	
</span><span class='line'>	<span class="c"># Create link.</span>
</span><span class='line'>	<span class="nb">cd</span> /var/www/virtual/<span class="nv">$USER</span>
</span><span class='line'>	ln -s redmine/public redmine.<span class="nv">$USER</span>.<span class="k">$(</span>hostname -a<span class="k">)</span>.uberspace.de
</span><span class='line'>	ln -s redmine/public <span class="k">${</span><span class="nv">DOMAINNAME</span><span class="k">}</span>
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Call Webpage information.</span>
</span><span class='line'><span class="nb">echo</span> -e <span class="s2">&quot;\e[0mInstallation of Redmine 2.5 done.\e[0m&quot;</span>
</span><span class='line'><span class="nb">echo</span> -e <span class="s2">&quot;\e[0;45mCall the your Redmine web page and log into admin account, to change the beginning password. User:\e[0;93madmin\e[0;45m Password:\e[0;93madmin\e[0m&quot;</span>
</span></code></pre></td></tr></table></div></figure></p>

<h2>Uninstallation</h2>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>rm -rf /var/www/virtual/<span class="k">${</span><span class="nv">USER</span><span class="k">}</span>/redmine
</span><span class='line'>mysql -e <span class="p">&amp;</span>ldquo<span class="p">;</span>DROP DATABASE <span class="k">${</span><span class="nv">USER</span><span class="k">}</span>_redmine<span class="p">;&amp;</span>rdquo<span class="p">;</span>
</span><span class='line'>rm /var/www/virtual/<span class="k">${</span><span class="nv">USER</span><span class="k">}</span>/redmine.<span class="nv">$USER</span>.<span class="k">$(</span>hostname -a<span class="k">)</span>.uberspace.de
</span><span class='line'>rm /var/www/virtual/<span class="k">${</span><span class="nv">USER</span><span class="k">}</span>/<span class="k">${</span><span class="nv">DOMAINNAME</span><span class="k">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<h3>Plugins-Installation</h3>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nb">cd</span> /var/www/virtual/<span class="nv">$USER</span>/redmine
</span><span class='line'>git clone &lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;https://github.com/jongha/redmine_vote.git&quot;</span>&gt;https://github.com/jongha/redmine_vote.git&lt;/a&gt; plugins/redmine_vote&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Migragte plugins, <span class="k">if</span> neccessary.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;cd /var/www/virtual/<span class="nv">$USER</span>/redmine
</span><span class='line'>rake redmine:plugins:migrate <span class="nv">RAILS_ENV</span><span class="o">=</span>production <span class="nv">NAME</span><span class="o">=</span>redmine_vote&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Restart Redmine.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Stop Redmine.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;kill <span class="k">$(</span>ps aux <span class="p">|</span> grep <span class="p">&amp;</span>lsquo<span class="p">;</span><span class="o">[</span>r<span class="o">]</span>edmine/public/dispatch.fcgi<span class="p">&amp;</span>rsquo<span class="p">;</span> <span class="p">|</span> awk <span class="p">&amp;</span>lsquo<span class="p">;</span><span class="o">{</span>print <span class="nv">$2</span><span class="o">}</span><span class="p">&amp;</span>rsquo<span class="p">;</span><span class="k">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Start Redmine. <span class="o">(</span>Via calling the website.<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;wget <span class="p">&amp;</span>ndash<span class="p">;</span>no-check-certificate <span class="k">${</span><span class="nv">DOMAINNAME</span><span class="k">}</span>/this-is-a-dummy-website-call/redmine-starts-when-webpage-is-called
</span></code></pre></td></tr></table></div></figure></p>

<h3>Plugin-Uninstallation:</h3>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">DOMAINNAME</span><span class="o">=</span><span class="p">&amp;</span>ldquo<span class="p">;</span>redmine.domain.tld<span class="p">&amp;</span>rdquo<span class="p">;</span>
</span><span class='line'><span class="nb">cd</span> /var/www/virtual/<span class="nv">$USER</span>/redmine&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Version does not work vor every plugin. But this will remove Database entries and tables.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;So it<span class="p">&amp;</span>rsquo<span class="p">;</span>s important to remove data from old plugins!&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;rake redmine:plugins:migrate <span class="nv">RAILS_ENV</span><span class="o">=</span>production <span class="nv">VERSION</span><span class="o">=</span>0.0.1 <span class="nv">NAME</span><span class="o">=</span>redmine_vote&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Normally use <span class="p">&amp;</span>ldquo<span class="p">;</span><span class="nv">VERSION</span><span class="o">=</span>0<span class="p">&amp;</span>rdquo<span class="p">;</span>.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;rm -rf plugins/redmine_vote&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Restart Redmine.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Stop Redmine.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;kill <span class="k">$(</span>ps aux <span class="p">|</span> grep <span class="p">&amp;</span>lsquo<span class="p">;</span><span class="o">[</span>r<span class="o">]</span>edmine/public/dispatch.fcgi<span class="p">&amp;</span>rsquo<span class="p">;</span> <span class="p">|</span> awk <span class="p">&amp;</span>lsquo<span class="p">;</span><span class="o">{</span>print <span class="nv">$2</span><span class="o">}</span><span class="p">&amp;</span>rsquo<span class="p">;</span><span class="k">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Start Redmine. <span class="o">(</span>Via calling the website.<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;wget <span class="p">&amp;</span>ndash<span class="p">;</span>no-check-certificate <span class="k">${</span><span class="nv">DOMAINNAME</span><span class="k">}</span>/this-is-a-dummy-website-call/redmine-starts-when-webpage-is-called
</span></code></pre></td></tr></table></div></figure></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Rbenv Installation]]></title>
    <link href="http://leitstelle.github.io/blog/2014/2014-07-04-rbenv/"/>
    <updated>2014-07-04T14:14:00+02:00</updated>
    <id>http://leitstelle.github.io/blog/2014/rbenv</id>
    <content type="html"><![CDATA[<h2>About</h2>

<p>Installation von rbenv in das eigene $HOME-Verzeichnis. Z.B. auch fÃ¼r Shared-Hoster geeignet.</p>

<h2>tl;dr</h2>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>wget -O <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/rbenv-install.sh &lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;https://leitstelle.github.io/downloads/code/2014/rbenv-install.sh&quot;</span>&gt;https://leitstelle.github.io/downloads/code/2014/rbenv-install.sh&lt;/a&gt;
</span><span class='line'>chmod u+x <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/rbenv-install.sh
</span><span class='line'><span class="nb">cd</span> <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>
</span><span class='line'>./rbenv-install.sh
</span></code></pre></td></tr></table></div></figure></p>

<h2>Konfiguration</h2>

<ul>
<li>Uberspace-Username -> ${USER}, <ubername> oder user</li>
<li>Uberspace-Severname -> $(hostname -a), <uberhost>, <hostname> oder host</li>
<li>${HOME}/.rbenv

<ul>
<li>Dort wird &lsquo;rbenv&rsquo; hinein installiert. Das heiÃŸt auch alle verschiedenen Ruby-Versionen und deren individuell installierten gems.</li>
</ul>
</li>
</ul>


<h2>Installation</h2>

<p><figure class='code'><figcaption><span> (rbenv-install.sh)</span> <a href='/downloads/code/2014/rbenv-install.sh'>download</a></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c">#!/usr/bin/env bash</span>
</span><span class='line'><span class="nb">echo</span> -e <span class="s2">&quot;\e[0;45mInstallation of rbenv\e[0m&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c">################################################################################</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c"># Check existing repository.</span>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> -d <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.rbenv <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>	<span class="nb">echo</span> <span class="s2">&quot;The directory ~/.rbenv already exists. Check it. Aborting.&quot;</span>
</span><span class='line'>	<span class="nb">exit </span>2
</span><span class='line'><span class="k">else</span>
</span><span class='line'>	<span class="c"># Git checkout.</span>
</span><span class='line'>    	git clone https://github.com/sstephenson/rbenv.git <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.rbenv
</span><span class='line'>	<span class="c"># Update</span>
</span><span class='line'>	<span class="c">#cd ~/.rbenv</span>
</span><span class='line'>	<span class="c">#git pull</span>
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Activate rbenv.</span>
</span><span class='line'>cat <span class="s">&lt;&lt; &#39;__EOF__&#39; &gt;&gt; ${HOME}/.bash_profile</span>
</span><span class='line'>
</span><span class='line'><span class="s">### rbenv ###</span>
</span><span class='line'><span class="s">export PATH=&quot;$HOME/.rbenv/bin:$PATH&quot;</span>
</span><span class='line'><span class="s">export PATH=&quot;$HOME/.rbenv/shims:$PATH&quot;</span>
</span><span class='line'><span class="s">eval &quot;$(rbenv init -)&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="s">__EOF__</span>
</span><span class='line'><span class="c"># Don&#39;t forget bashrc.</span>
</span><span class='line'>cat <span class="s">&lt;&lt; &#39;__EOF__&#39; &gt;&gt; ${HOME}/.bashrc</span>
</span><span class='line'>
</span><span class='line'><span class="s">### rbenv ###</span>
</span><span class='line'><span class="s">export PATH=&quot;$HOME/.rbenv/bin:$PATH&quot;</span>
</span><span class='line'><span class="s">export PATH=&quot;$HOME/.rbenv/shims:$PATH&quot;</span>
</span><span class='line'><span class="s">eval &quot;$(rbenv init -)&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="s">__EOF__</span>
</span><span class='line'>
</span><span class='line'><span class="c"># exec $SHELL</span>
</span><span class='line'>. <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.bash_profile
</span><span class='line'>
</span><span class='line'><span class="c"># Check rbenv.</span>
</span><span class='line'><span class="nb">type </span>rbenv
</span><span class='line'>
</span><span class='line'><span class="c"># Install ruby-build - The `rbenv install` command.</span>
</span><span class='line'>git clone https://github.com/sstephenson/ruby-build.git <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.rbenv/plugins/ruby-build
</span><span class='line'><span class="c"># Install rbenv-gem-rehash - The auto `rbenv rehash` when installing new gems.</span>
</span><span class='line'>git clone https://github.com/sstephenson/rbenv-gem-rehash.git <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.rbenv/plugins/rbenv-gem-rehash
</span><span class='line'>
</span><span class='line'><span class="c"># List available installations.</span>
</span><span class='line'><span class="c">#rbenv install --list</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Install ruby (need some time).</span>
</span><span class='line'>rbenv install 2.1.2
</span><span class='line'>rbenv install 1.9.3-p547
</span><span class='line'><span class="c"># Rehash rbenv. This write changes into ~/.rbenv/shims. Important if gems provide some new bins.</span>
</span><span class='line'>rbenv rehash
</span><span class='line'>
</span><span class='line'><span class="c"># Set global ruby version.</span>
</span><span class='line'>rbenv global 2.1.2
</span><span class='line'>
</span><span class='line'><span class="c"># Hooks rbenv into the shell. (Already happend after `. ~/.bash_profile`. use `rbenv init -` to see more informations.)</span>
</span><span class='line'><span class="c">#rbenv init</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Print rbenv used ruby version.</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;rbenv version:&quot;</span>
</span><span class='line'>rbenv version
</span><span class='line'>
</span><span class='line'><span class="c"># Install options for gem.</span>
</span><span class='line'><span class="c"># Old: echo &quot;gem: --user-install --no-rdoc --no-ri&quot; &gt; ~/.gemrc</span>
</span><span class='line'><span class="c"># Do not use the `--user-install` option! This will install gems into `~/.gem` dir and not into the rbenv version specific folder!</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;gem: --no-rdoc --no-ri&quot;</span> &gt; <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.gemrc
</span></code></pre></td></tr></table></div></figure></p>

<h2>Uninstallation</h2>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>rm -rf <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.rbenv
</span><span class='line'>rm <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.gemrc
</span><span class='line'>rm -rf <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/.gem
</span><span class='line'>sed -i -e <span class="p">&amp;</span>rsquo<span class="p">;</span>s/eval <span class="p">&amp;</span>ldquo<span class="p">;</span><span class="k">$(</span>rbenv init -<span class="k">)</span><span class="p">&amp;</span>rdquo<span class="p">;</span>/ /g<span class="p">&amp;</span><span class="c">#8217; ${HOME}/.bash_profile</span>
</span><span class='line'>sed -i -e <span class="p">&amp;</span>rsquo<span class="p">;</span>s/export <span class="nv">PATH</span><span class="o">=</span><span class="p">&amp;</span>ldquo<span class="p">;</span><span class="nv">$HOME</span><span class="se">\/</span>.rbenv<span class="se">\/</span>shims:<span class="nv">$PATH</span><span class="p">&amp;</span>rdquo<span class="p">;</span>/ /g<span class="p">&amp;</span><span class="c">#8217; ${HOME}/.bash_profile</span>
</span><span class='line'>sed -i -e <span class="p">&amp;</span>rsquo<span class="p">;</span>s/export <span class="nv">PATH</span><span class="o">=</span><span class="p">&amp;</span>ldquo<span class="p">;</span><span class="nv">$HOME</span><span class="se">\/</span>.rbenv<span class="se">\/</span>bin:<span class="nv">$PATH</span><span class="p">&amp;</span>rdquo<span class="p">;</span>/ /g<span class="p">&amp;</span><span class="c">#8217; ${HOME}/.bash_profile</span>
</span><span class='line'>sed -i -e <span class="p">&amp;</span>rsquo<span class="p">;</span>s/### rbenv <span class="c">###/ /g&amp;#8217; ${HOME}/.bash_profile</span>
</span></code></pre></td></tr></table></div></figure></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Redmine Installation]]></title>
    <link href="http://leitstelle.github.io/blog/2014/2014-07-04-redmine/"/>
    <updated>2014-07-04T13:14:00+02:00</updated>
    <id>http://leitstelle.github.io/blog/2014/redmine</id>
    <content type="html"><![CDATA[<h2>About</h2>

<p>Installation von Redmine 2.5 auf einem Uberspace-Account unter Benutzung einer eigenen Domain.</p>

<h2>tl;dr</h2>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>wget -O <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/redmine-2.5-install-on-ruby-2.1.1.sh &lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;https://leitstelle.github.io/downloads/code/2014/redmine-2.5-install-on-ruby-2.1.1.sh&quot;</span>&gt;https://leitstelle.github.io/downloads/code/2014/redmine-2.5-install-on-ruby-2.1.1.sh&lt;/a&gt;
</span><span class='line'>chmod u+x <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>/redmine-2.5-install-on-ruby-2.1.1.sh
</span><span class='line'><span class="nb">cd</span> <span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>
</span><span class='line'>sed -i -e <span class="p">&amp;</span>rsquo<span class="p">;</span>s/DOMAINNAME<span class="o">=</span><span class="p">&amp;</span>ldquo<span class="p">;</span>redmine.example.com<span class="p">&amp;</span>rdquo<span class="p">;</span>/DOMAINNAME<span class="o">=</span><span class="p">&amp;</span>ldquo<span class="p">;</span>redmine.yourdomain.net<span class="p">&amp;</span>rdquo<span class="p">;</span>/g<span class="p">&amp;</span><span class="c">#8217; redmine-2.5-install-on-ruby-2.1.1.sh</span>
</span><span class='line'>./redmine-2.5-install-on-ruby-2.1.1.sh
</span></code></pre></td></tr></table></div></figure></p>

<h2>Konfiguration</h2>

<ul>
<li>Uberspace-Username -> ${USER}, <ubername> oder user</li>
<li>Uberspace-Severname -> $(hostname -a), <uberhost>, <hostname> oder host</li>
<li>/var/www/virtual/${USER}/redmine

<ul>
<li>Dort wird Redmine hinein installiert, damit der Unterordner <code>/var/www/virtual/${USER}/redmine/public</code> von auÃŸen Ã¼ber den Symlink <code>ln -s ./redmine/public redmine.example.com</code> erreichbar ist.</li>
</ul>
</li>
</ul>


<h2>Installation</h2>

<p><figure class='code'><figcaption><span> (redmine-2.5-install-on-ruby-2.1.1.sh)</span> <a href='/downloads/code/2014/redmine-2.5-install-on-ruby-2.1.1.sh'>download</a></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
<span class='line-number'>164</span>
<span class='line-number'>165</span>
<span class='line-number'>166</span>
<span class='line-number'>167</span>
<span class='line-number'>168</span>
<span class='line-number'>169</span>
<span class='line-number'>170</span>
<span class='line-number'>171</span>
<span class='line-number'>172</span>
<span class='line-number'>173</span>
<span class='line-number'>174</span>
<span class='line-number'>175</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c">#!/usr/bin/env bash</span>
</span><span class='line'><span class="nb">echo</span> -e <span class="s2">&quot;\e[0;45mInstallation of Redmine 2.5.\e[0m&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c">################################################################################</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Subfolder or subdomain?</span>
</span><span class='line'><span class="nv">SUBFOLDER</span><span class="o">=</span><span class="nb">false</span>
</span><span class='line'><span class="nv">DOMAINNAME</span><span class="o">=</span><span class="s2">&quot;redmine.example.com&quot;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c"># Activate Ruby</span>
</span><span class='line'>cat <span class="s">&lt;&lt;&#39;__EOF__&#39; &gt;&gt; ~/.bash_profile</span>
</span><span class='line'><span class="s">export PATH=/package/host/localhost/ruby-2.1.1/bin:$PATH</span>
</span><span class='line'><span class="s">export PATH=$HOME/.gem/ruby/2.1.0/bin:$PATH</span>
</span><span class='line'><span class="s">__EOF__</span>
</span><span class='line'>. ~/.bash_profile
</span><span class='line'>
</span><span class='line'><span class="c">## Activate Ruby using &#39;rbenv&#39;.</span>
</span><span class='line'><span class="c">#cat &lt;&lt;&#39;__EOF__&#39; &gt;&gt; ~/.bash_profile</span>
</span><span class='line'><span class="c">#export PATH=$HOME/.rbenv/shims:$PATH</span>
</span><span class='line'><span class="c">#__EOF__</span>
</span><span class='line'><span class="c">#. ~/.bash_profile</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Prepare gem.</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;gem: --user-install --no-rdoc --no-ri&quot;</span> &gt; ~/.gemrc
</span><span class='line'>
</span><span class='line'><span class="c"># We need bundler to install all gem dependencies for redmine.</span>
</span><span class='line'><span class="c">#Old: gem install --user-install --no-rdoc --no-ri bundler</span>
</span><span class='line'>gem install bundler
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c"># Apache readable directory, but not html doc folder.</span>
</span><span class='line'><span class="nb">cd</span> /var/www/virtual/<span class="nv">$USER</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Check existing repository.</span>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> -d redmine-2.5 <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>	<span class="nb">echo</span> <span class="s2">&quot;Source directory redmine-2.5 exists. Copying data from there.&quot;</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'>    	svn co http://svn.redmine.org/redmine/branches/2.5-stable redmine-2.5
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Clear existing redmine installation.</span>
</span><span class='line'>rm -Rf redmine <span class="o">&amp;&amp;</span> mkdir -p redmine
</span><span class='line'>cp -R redmine-2.5/* redmine/
</span><span class='line'>
</span><span class='line'><span class="c"># REDMINE DIR</span>
</span><span class='line'><span class="nb">cd </span>redmine
</span><span class='line'>
</span><span class='line'><span class="c"># Add fcgi to gem installation.</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;gem &#39;fcgi&#39;&quot;</span> &gt; Gemfile.local
</span><span class='line'>
</span><span class='line'><span class="c"># Create MySQL database.</span>
</span><span class='line'><span class="c"># Be carefully to drop : </span>
</span><span class='line'>mysql -e <span class="s2">&quot;DROP DATABASE \`${USER}_redmine\`;&quot;</span>
</span><span class='line'>mysql -e <span class="s2">&quot;CREATE DATABASE ${USER}_redmine CHARACTER SET utf8&quot;</span>
</span><span class='line'>
</span><span class='line'>cat &gt; config/database.yml <span class="s">&lt;&lt;__EOF__</span>
</span><span class='line'><span class="s">production:</span>
</span><span class='line'><span class="s">  adapter: mysql2</span>
</span><span class='line'><span class="s">  database: ${USER}_redmine</span>
</span><span class='line'><span class="s">  host: localhost</span>
</span><span class='line'><span class="s">  username: $USER</span>
</span><span class='line'><span class="s">  password: `my_print_defaults client | grep -- --password | awk -F = &#39;{ print $2 }&#39;`</span>
</span><span class='line'><span class="s">  encoding: utf8</span>
</span><span class='line'><span class="s">__EOF__</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Install dependencies.</span>
</span><span class='line'>bundle install --path ~/.gem --without development <span class="nb">test </span>postgresql sqlite
</span><span class='line'>
</span><span class='line'><span class="c"># Generate key.</span>
</span><span class='line'>rake generate_secret_token
</span><span class='line'>
</span><span class='line'><span class="c"># Migrate database. Creates also admin account.</span>
</span><span class='line'>rake db:migrate <span class="nv">RAILS_ENV</span><span class="o">=</span>production
</span><span class='line'>
</span><span class='line'><span class="c"># Load default configuration.</span>
</span><span class='line'>rake redmine:load_default_data <span class="nv">RAILS_ENV</span><span class="o">=</span>production
</span><span class='line'><span class="c"># 	Select your prefered langugae.</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Configure to send emails.</span>
</span><span class='line'>cat &gt; config/configuration.yml <span class="s">&lt;&lt;__EOF__</span>
</span><span class='line'><span class="s">production:</span>
</span><span class='line'><span class="s">  email_delivery:</span>
</span><span class='line'><span class="s">    delivery_method: :sendmail</span>
</span><span class='line'><span class="s">__EOF__</span>
</span><span class='line'>
</span><span class='line'><span class="c"># FastCGI.</span>
</span><span class='line'><span class="nb">cd </span>public
</span><span class='line'>cp -a dispatch.fcgi.example dispatch.fcgi
</span><span class='line'><span class="c"># FastCGI wrapper.</span>
</span><span class='line'>cat &gt; wrapper.fcgi <span class="s">&lt;&lt;__EOF__</span>
</span><span class='line'><span class="s">#!/bin/bash</span>
</span><span class='line'><span class="s">export USER=$USER</span>
</span><span class='line'><span class="s">export HOME=$HOME</span>
</span><span class='line'><span class="s">source \$HOME/.bash_profile</span>
</span><span class='line'><span class="s">export RAILS_ENV=production</span>
</span><span class='line'><span class="s">exec ./dispatch.fcgi</span>
</span><span class='line'><span class="s">__EOF__</span>
</span><span class='line'>chmod <span class="m">755</span> wrapper.fcgi
</span><span class='line'>
</span><span class='line'><span class="c"># Make public directory readable.</span>
</span><span class='line'>chmod <span class="m">755</span> .
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c">### SUBFOLDER OR SUBDOMAIN? ###</span>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;${SUBFOLDER}&quot;</span> <span class="o">=</span> <span class="nb">true</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>	<span class="c"># SUBFOLDER</span>
</span><span class='line'>	<span class="nb">echo</span> <span class="s2">&quot;Configure for usage of redmine in a subfolder.&quot;</span>
</span><span class='line'>	<span class="nb">cd</span> /var/www/virtual/<span class="nv">$USER</span>/redmine
</span><span class='line'>	<span class="nb">echo</span> <span class="s1">&#39;Redmine::Utils::relative_url_root = &quot;/redmine&quot;&#39;</span> &gt;&gt; config/environment.rb
</span><span class='line'>	<span class="c"># Bugfix</span>
</span><span class='line'>	sed -i -e <span class="s2">&quot;s/^# Initialize the rails application/RedmineApp::Application.routes.default_scope = { :path =&gt; &#39;\/redmine&#39;, :shallow_path =&gt; &#39;\/redmine&#39; }\n\n# Initialize the rails application/&quot;</span> config/environment.rb
</span><span class='line'>
</span><span class='line'>	<span class="c"># Create link.</span>
</span><span class='line'>	<span class="nb">cd</span> /var/www/virtual/<span class="nv">$USER</span>/html
</span><span class='line'>	ln -s ../redmine/public redmine
</span><span class='line'>	
</span><span class='line'>	<span class="c"># &#39;.htaccess&#39;</span>
</span><span class='line'>	cat &gt; .htaccess <span class="s">&lt;&lt;&#39;__EOF__&#39;</span>
</span><span class='line'><span class="s">	&lt;IfModule mod_fastcgi.c&gt;</span>
</span><span class='line'><span class="s">	        AddHandler fastcgi-script .fcgi</span>
</span><span class='line'><span class="s">	&lt;/IfModule&gt;</span>
</span><span class='line'><span class="s">	&lt;IfModule mod_fcgid.c&gt;</span>
</span><span class='line'><span class="s">	        AddHandler fcgid-script .fcgi</span>
</span><span class='line'><span class="s">	&lt;/IfModule&gt;</span>
</span><span class='line'><span class="s">	Options + SymLinksIfOwnerMatch +ExecCGI</span>
</span><span class='line'><span class="s">	 </span>
</span><span class='line'><span class="s">	RewriteEngine On</span>
</span><span class='line'><span class="s">	 </span>
</span><span class='line'><span class="s">	RewriteRule ^$ index.html [QSA]</span>
</span><span class='line'><span class="s">	RewriteRule ^([^.]+)$ $1.html [QSA]</span>
</span><span class='line'><span class="s">	RewriteCond %{REQUEST_FILENAME} !-f</span>
</span><span class='line'><span class="s">	RewriteRule ^(.*)$ wrapper.fcgi [QSA,L]</span>
</span><span class='line'><span class="s">	 </span>
</span><span class='line'><span class="s">	ErrorDocument 500 &quot;&lt;h2&gt;Application error&lt;/h2&gt;Rails application failed to start properly&quot;</span>
</span><span class='line'><span class="s">	__EOF__</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'>	<span class="c"># SUBDOMAIN</span>
</span><span class='line'>	<span class="nb">echo</span> <span class="s2">&quot;Configure for usage of redmine in a subdomain.&quot;</span>
</span><span class='line'>	<span class="c"># &#39;.htaccess&#39;.</span>
</span><span class='line'>	<span class="nb">cd</span> /var/www/virtual/<span class="nv">$USER</span>/redmine/public
</span><span class='line'>	cat &gt; .htaccess <span class="s">&lt;&lt;&#39;__EOF__&#39;</span>
</span><span class='line'><span class="s">	&lt;IfModule mod_fastcgi.c&gt;</span>
</span><span class='line'><span class="s">	        AddHandler fastcgi-script .fcgi</span>
</span><span class='line'><span class="s">	&lt;/IfModule&gt;</span>
</span><span class='line'><span class="s">	&lt;IfModule mod_fcgid.c&gt;</span>
</span><span class='line'><span class="s">	        AddHandler fcgid-script .fcgi</span>
</span><span class='line'><span class="s">	&lt;/IfModule&gt;</span>
</span><span class='line'><span class="s">	Options +SymLinksIfOwnerMatch +ExecCGI</span>
</span><span class='line'><span class="s">	 </span>
</span><span class='line'><span class="s">	RewriteEngine On</span>
</span><span class='line'><span class="s">	RewriteBase /</span>
</span><span class='line'><span class="s">	 </span>
</span><span class='line'><span class="s">	# http:// -&gt; https://</span>
</span><span class='line'><span class="s">	RewriteCond %{SERVER_PORT} 80</span>
</span><span class='line'><span class="s">	RewriteRule ^(.*)$ https://%{HTTP_HOST}/$1 [R,L]</span>
</span><span class='line'><span class="s">	</span>
</span><span class='line'><span class="s">	RewriteRule ^$ index.html [QSA]</span>
</span><span class='line'><span class="s">	RewriteRule ^([^.]+)$ $1.html [QSA]</span>
</span><span class='line'><span class="s">	RewriteCond %{REQUEST_FILENAME} !-f</span>
</span><span class='line'><span class="s">	RewriteRule ^(.*)$ wrapper.fcgi [QSA,L]</span>
</span><span class='line'><span class="s">	 </span>
</span><span class='line'><span class="s">	ErrorDocument 500 &quot;&lt;h2&gt;Application error&lt;/h2&gt;Rails application failed to start properly&quot;</span>
</span><span class='line'><span class="s">	__EOF__</span>
</span><span class='line'>	
</span><span class='line'>	<span class="c"># Create link.</span>
</span><span class='line'>	<span class="nb">cd</span> /var/www/virtual/<span class="nv">$USER</span>
</span><span class='line'>	ln -s redmine/public redmine.<span class="nv">$USER</span>.<span class="k">$(</span>hostname -a<span class="k">)</span>.uberspace.de
</span><span class='line'>	ln -s redmine/public <span class="k">${</span><span class="nv">DOMAINNAME</span><span class="k">}</span>
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c"># Call Webpage information.</span>
</span><span class='line'><span class="nb">echo</span> -e <span class="s2">&quot;\e[0mInstallation of Redmine 2.5 done.\e[0m&quot;</span>
</span><span class='line'><span class="nb">echo</span> -e <span class="s2">&quot;\e[0;45mCall the your Redmine web page and log into admin account, to change the beginning password. User:\e[0;93madmin\e[0;45m Password:\e[0;93madmin\e[0m&quot;</span>
</span></code></pre></td></tr></table></div></figure></p>

<h2>Uninstallation</h2>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>rm -rf /var/www/virtual/<span class="nv">$USER</span>/redmine
</span><span class='line'>rm redmine
</span><span class='line'>rm redmine.<span class="nv">$USER</span>.<span class="k">$(</span>hostname -a<span class="k">)</span>.uberspace.de
</span><span class='line'>rm <span class="k">${</span><span class="nv">DOMAINNAME</span><span class="k">}</span>
</span><span class='line'>mysql -e <span class="p">&amp;</span>ldquo<span class="p">;</span>DROP DATABASE <span class="sb">`</span><span class="k">${</span><span class="nv">USER</span><span class="k">}</span>_redmine<span class="sb">`</span><span class="p">;&amp;</span>rdquo<span class="p">;</span>
</span></code></pre></td></tr></table></div></figure></p>

<h3>Plugins-Installation</h3>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nb">cd</span> /var/www/virtual/<span class="nv">$USER</span>/redmine
</span><span class='line'>git clone &lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;https://github.com/jongha/redmine_vote.git&quot;</span>&gt;https://github.com/jongha/redmine_vote.git&lt;/a&gt; plugins/redmine_vote&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Migragte plugins, <span class="k">if</span> neccessary.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;cd /var/www/virtual/<span class="nv">$USER</span>/redmine
</span><span class='line'>rake redmine:plugins:migrate <span class="nv">RAILS_ENV</span><span class="o">=</span>production <span class="nv">NAME</span><span class="o">=</span>redmine_vote&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Restart Redmine.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Stop Redmine.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;kill <span class="k">$(</span>ps aux <span class="p">|</span> grep <span class="p">&amp;</span>lsquo<span class="p">;</span><span class="o">[</span>r<span class="o">]</span>edmine/public/dispatch.fcgi<span class="p">&amp;</span>rsquo<span class="p">;</span> <span class="p">|</span> awk <span class="p">&amp;</span>lsquo<span class="p">;</span><span class="o">{</span>print <span class="nv">$2</span><span class="o">}</span><span class="p">&amp;</span>rsquo<span class="p">;</span><span class="k">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Start Redmine. <span class="o">(</span>Via calling the website.<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;wget <span class="p">&amp;</span>ndash<span class="p">;</span>no-check-certificate <span class="k">${</span><span class="nv">DOMAINNAME</span><span class="k">}</span>/this-is-a-dummy-website-call/redmine-starts-when-webpage-is-called
</span></code></pre></td></tr></table></div></figure></p>

<h3>Plugin-Uninstallation:</h3>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">DOMAINNAME</span><span class="o">=</span><span class="p">&amp;</span>ldquo<span class="p">;</span>redmine.domain.tld<span class="p">&amp;</span>rdquo<span class="p">;</span>
</span><span class='line'><span class="nb">cd</span> /var/www/virtual/<span class="nv">$USER</span>/redmine&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Version does not work vor every plugin. But this will remove Database entries and tables.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;So it<span class="p">&amp;</span>rsquo<span class="p">;</span>s important to remove data from old plugins!&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;rake redmine:plugins:migrate <span class="nv">RAILS_ENV</span><span class="o">=</span>production <span class="nv">VERSION</span><span class="o">=</span>0.0.1 <span class="nv">NAME</span><span class="o">=</span>redmine_vote&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Normally use <span class="p">&amp;</span>ldquo<span class="p">;</span><span class="nv">VERSION</span><span class="o">=</span>0<span class="p">&amp;</span>rdquo<span class="p">;</span>.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;rm -rf plugins/redmine_vote&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Stop Redmine.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;kill <span class="k">$(</span>ps aux <span class="p">|</span> grep <span class="p">&amp;</span>lsquo<span class="p">;</span><span class="o">[</span>r<span class="o">]</span>edmine/public/dispatch.fcgi<span class="p">&amp;</span>rsquo<span class="p">;</span> <span class="p">|</span> awk <span class="p">&amp;</span>lsquo<span class="p">;</span><span class="o">{</span>print <span class="nv">$2</span><span class="o">}</span><span class="p">&amp;</span>rsquo<span class="p">;</span><span class="k">)</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Start Redmine. <span class="o">(</span>Via calling the website.<span class="o">)</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;wget <span class="p">&amp;</span>ndash<span class="p">;</span>no-check-certificate <span class="k">${</span><span class="nv">DOMAINNAME</span><span class="k">}</span>/this-is-a-dummy-website-call/redmine-starts-when-webpage-is-called
</span></code></pre></td></tr></table></div></figure></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Pipelight installieren]]></title>
    <link href="http://leitstelle.github.io/blog/2014/2014-06-13-pipelight/"/>
    <updated>2014-06-13T11:50:00+02:00</updated>
    <id>http://leitstelle.github.io/blog/2014/pipelight</id>
    <content type="html"><![CDATA[<p>&ndash;</p>

<h2>System</h2>

<ul>
<li>Debian 8 &ldquo;Jessie&rdquo; 64-bit</li>
</ul>


<h2>About</h2>

<p>Silverlight ist, trotz dass es nicht zum GlÃ¼ck mehr weiter entwickelt wird, fÃ¼r den geneigten Streamin-Fan (auf Seiten wie Amazon Prime Instant Video, Maxdome, WatchEver, Netflix, &hellip;) leider ein Muss, um nicht auf den Filmgenuss verzichten zu mÃ¼ssen.</p>

<p>FÃ¼r GNU/Linux-Benutzer gibt es da ja nun <a href="http://pipelight.net">Pipelight</a>. Die <a href="http://pipelight.net/cms/installation.html">Installationsseite</a>
verrÃ¤t, dass Pipelight bequem fÃ¼r eine Vielzahl an Platformen als Paket angeboten wird.</p>

<p>Besitzt man einen dedizierten Rechner fÃ¼r das Benutzen von fremdartiger, nicht-vertrauenswÃ¼rdiger Software (sog. Shit-Box), so kann man die Pakete einfach installieren und sich der Streamings erfreuen.</p>

<p>Hat man keine Shit-Box verfÃ¼gbar, so kann man, wenn auch mit AbzÃ¼gen, einen Kompromiss wagen und Pipelight mit seinen AbhÃ¤ngigkeiten nur fÃ¼r einen separaten Benutzer einrichten. Dazu muss ein wenig gebaut werden.</p>

<h2>Wine</h2>

<p>Ja, das ganze basiert auf <em>Wine</em>. Das heiÃŸt, viel Kompilierungs-SpaÃŸ unter 64-bit Systemen. Auf der <a href="http://pipelight.net/cms/page-wine.html">Wine-Seite</a> von Pipelight heiÃŸt es auch, dass es das problematischste ist, die 32-bit-AbhÃ¤ngigkeiten zu installieren.</p>

<p>Wir brauchen:</p>

<ul>
<li>Wine-AbhÃ¤ngigkeiten</li>
<li>32-bit Wine (auch unte 64-bit-Systemen)</li>
<li>Wine-Patches</li>
</ul>


<h3>Dependencies</h3>

<ul>
<li><a href="http://wiki.winehq.org/WineOn64bit">wiki.winehq.org/WineOn64bit</a></li>
</ul>


<p><figure class='code'><figcaption><span>Install dependencies </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>su -
</span><span class='line'>dpkg <span class="p">&amp;</span>ndash<span class="p">;</span>add-architecture i386
</span><span class='line'>aptitude update&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;aptitude install ia32-libs-i386 -&gt; use the following <span class="p">&amp;</span>ldquo<span class="p">;</span>replacement<span class="p">&amp;</span>rdquo<span class="p">;</span>&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;web: &lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;https://packages.debian.org/wheezy/ia32-libs-i386&quot;</span>&gt;https://packages.debian.org/wheezy/ia32-libs-i386&lt;/a&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;aptitude install multiarch-support freeglut3 libacl1 libaio1 libasyncns0 libattr1  libaudio2 libaudiofile1 libavahi-client3 libavahi-common3 libbsd0 libcap2 libcomerr2 libcups2 libcurl3 libdbus-1-3 libdirectfb-1.2-9 libdrm-intel1 libdrm-radeon1 libdrm2 libedit2 libesd0 libexif12 libexpat1 libflac8 libfltk1.1 libfontconfig1 libfreetype6 libgcrypt11 libgdbm3 libgl1-mesa-dri libgl1-mesa-glx libglu1-mesa libgnutls26 libgpg-error0 libgssapi-krb5-2 libice6 libidn11 libieee1284-3 libjack-jackd2-0 libjpeg62 libjpeg8 libk5crypto3 libkeyutils1 libkrb5-3 libkrb5support0 liblcms1 libltdl7 liblzo2-2 libmpg123-0 libnspr4-0d libnss3-1d libodbc1 libogg0 libopenal1 libpam0g libpng12-0 libpopt0 libpulse0 libsamplerate0 libsane libsasl2-2 libsdl1.2debian libselinux1 libsigc++-2.0-0c2a libsm6 libsndfile1 libsqlite3-0 libssh2-1 libssl1.0.0 libstdc++6 libsysfs2 libtdb1 libts-0.0-0 libusb-0.1-4 libuuid1 libvorbis0a libvorbisenc2 libvorbisfile3 libwrap0 libx11-6 libx86-1 libxau6 libxaw7 libxcb-render-util0 libxcb-render0 libxcb1    libxcomposite1 libxcursor1 libxdamage1 libxdmcp6 libxext6  libxfixes3 libxft2 libxi6 libxinerama1 libxml2 libxmu6 libxmuu1 libxp6 libxpm4 libxrandr2 libxrender1 libxslt1.1 libxss1 libxt6 libxtst6 libxv1 libxxf86vm1 odbcinst1debian2 xaw3dg&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;old: lesstif2 libgphoto2-2 libgphoto2-port0 libsvga1 libtasn1-3 libtiff4 libjack0 libgstreamer-plugins-base0.10-0&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;development dependencies&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;aptitude install binutils-multiarch build-essential checkinstall:i386 libasound2-dev:i386 libfontconfig1-dev:i386 libfreetype6-dev:i386 libglu1-mesa-dev:i386 libjpeg8-dev:i386 libldap2-dev:i386 libosmesa6-dev:i386 libncurses5-dev:i386 libpng12-dev:i386 libtiff5-dev:i386 libxml2-dev:i386 libxslt1-dev:i386 libxrender-dev:i386 libx11-dev:i386  libxcursor-dev:i386 libxi-dev:i386 libxxf86vm-dev:i386 libxrandr-dev:i386 libxinerama-dev:i386 libxcomposite-dev:i386 libdbus-1-dev:i386 libgnutls-dev:i386 libncurses-dev:i386 libsane-dev:i386 libv4l-dev:i386 libgphoto2-2-dev:i386 liblcms2-dev:i386 libgstreamer-plugins-base0.10-dev:i386 libcapi20-dev:i386 libcups2-dev:i386  libgsm1-dev:i386  libmpg123-dev:i386 libopenal-dev:i386 libhal-dev:i386 gettext:i386 prelink:i386 bzip2:i386 bison:i386 flex:i386 oss4-dev:i386  ocl-icd-libopencl1:i386 opencl-headers:i386
</span></code></pre></td></tr></table></div></figure></p>

<h3>Wine-Kompilation (v1.7.19)</h3>

<p>NOTE: Besides the normal dependencies, you will additionally have to install the development files of libattr (i386) to get DRM working with Silverlight. Please double check that Wine was able to detect the libattr header files!</p>

<p><figure class='code'><figcaption><span>Install dependencies </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Download and extract the latest supported wine version&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;wget &lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;http://sourceforge.net/projects/wine/files/Source/wine-1.7.19.tar.bz2&quot;</span>&gt;http://sourceforge.net/projects/wine/files/Source/wine-1.7.19.tar.bz2&lt;/a&gt;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;wget &lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;http://skylink.dl.sourceforge.net/project/wine/Source/wine-1.7.19.tar.bz2&quot;</span>&gt;http://skylink.dl.sourceforge.net/project/wine/Source/wine-1.7.19.tar.bz2&lt;/a&gt;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;tar -xvjf wine-1.7.19.tar.bz2&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Download and extract the latest wine patches&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;wget &lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;https://github.com/compholio/wine-compholio-daily/archive/latest-release.tar.gz&quot;</span>&gt;https://github.com/compholio/wine-compholio-daily/archive/latest-release.tar.gz&lt;/a&gt;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;tar -xvzf latest-release.tar.gz&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Apply patches&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;make -C wine-compholio-daily-latest-release/patches <span class="nv">DESTDIR</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/wine-1.7.19&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;cd wine-1.7.19&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;./configure <span class="p">&amp;</span>ndash<span class="p">;</span>with-xattr&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;or: ./configure <span class="p">&amp;</span>ndash<span class="p">;</span>with-xattr <span class="p">&amp;</span>ndash<span class="p">;</span><span class="nv">prefix</span><span class="o">=</span><span class="nv">$HOME</span>/mywine&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Build and install.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;make depend
</span><span class='line'>make
</span><span class='line'>make install&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;or, when installing as a subdir of <span class="nv">$HOME</span>: make install&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></p>

<h3>Wine-Patches</h3>

<p>Es stehen 3 Downloads zur VerfÃ¼gung:</p>

<pre><code># All needed wine patches sort into grouped subfolders.
wget http://fds-team.de/mirror/wine-compholio.tar.gz
# All needed wine patches in one folder.
wget http://fds-team.de/mirror/wine-patches.tar.gz
# A minimal set of wine patches.
wget http://fds-team.de/mirror/wine-patches-minimal.tar.gz
</code></pre>

<h2>UPDATE:</h2>

<p>Die &ldquo;WINE Compholio&rdquo; Installation fehlt noch.
(Tut mir leid, die habe ich vÃ¶llig vergessen und wird noch nachgereicht. Ich hoffe ihr habt noch Geduld.)</p>

<h2>tl;dr</h2>

<ul>
<li>Installiere AbhÃ¤ngigkeiten fÃ¼r Pipelight.</li>
<li>FÃ¼ge neuen Nutzer dem System hinzu.

<ul>
<li>ÃœberprÃ¼fe, dass dieser Nutzer nur die Rechte hat, die er minimal benÃ¶tigt.</li>
</ul>
</li>
<li>Als anderer Nutzer anmelden.</li>
<li>Download des Sourcecodes von Pipelight.</li>
<li>Konfiguriere und kompiliere Pipelight.</li>
<li>Kopiere die *.so Dateien.</li>
<li>Schalte Silverlight ein.</li>
<li>Starte den Browser.</li>
</ul>


<h2>Warum?</h2>

<p>Linux-Benutzer kennen es: Man kann einfach kein &ldquo;Amazon Prime Instant Video&rdquo;, &ldquo;Watch Ever&rdquo; und sonstige Angebote fÃ¼r Video-Streaming wahrnehmen, weil sie alle auf das &ldquo;KrebsgeschwÃ¼r des Internets&rdquo; setzen. Diesem will man sich normaler Weise auch nicht aussetzen. Von Sicherheitsbedenken ganz zu schweigen.</p>

<p>Was tun? Das dachten sich wohl auch schon viele andere. Moonlight wurde entwickelt. Das kann leider kein DRM (Wer auch immer DRM erfunden hat.). Irgendwo, in den Weiten des Internets, kennt angeblich jemand eine LÃ¶sung fÃ¼r das Problem, die auf &lsquo;libflashplugin-nonfree&rsquo; setzt.</p>

<p>Es gibt aber auch &ldquo;<a href="http://fds-team.de/cms/articles/2013-08/pipelight-using-silverlight-in-linux-browsers.html">Pipelight</a>&rdquo; (<a href="https://launchpad.net/pipelight">launchpad.net/pipelight</a>). Was macht das? Im Grunde wird Silverlight unter WINE installiert und als Plugin fÃ¼r den Linux-Browser verfÃ¼gbar. Der Browser muss sich nur im Useragent als Windows-GerÃ¤t ausgeben und durch das Plugin die WINE-Installation von Silverlight aufrufen.</p>

<p>FÃ¼r viele Linux-Distributionen ist Pipelight als <a href="http://fds-team.de/cms/pipelight-installation.html">Repository</a> verfÃ¼gbar. Allerdings lÃ¤sst es sich auch kompilieren. Die MÃ¶glichkeit aus vielen Kompromissen (zwischen Sicherheit, Faulheit, dem fehlen eines zweiten unsicheren Computers, &hellip;) ist nun, einen weiteren Benutzer auf dem System anzulegen, diesen mit minimalen AusfÃ¼hrungsrechten zu versehen und es ihm weites gehend unmÃ¶glich machen, andere Home-User-Verzeichnisse zu lesen.</p>

<h2>Vorbereitung</h2>

<pre><code>wget https://leitstelle.github.io/downloads/code/2014/pipelight-preparation.root.sh
chmod +x pipelight-preparation.root.sh
su
./pipelight-preparation.root.sh
</code></pre>

<p><figure class='code'><figcaption><span>Prepare the system to use pipelight. (pipelight-preparation.root.sh)</span> <a href='/downloads/code/2014/pipelight-preparation.root.sh'>download</a></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c">#!/usr/bin/env bash</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Script for GNU/Linux Debian Jessie (Testing).</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Run this script with root rights.</span>
</span><span class='line'><span class="c"># Some root things have to be done.</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Create new user</span>
</span><span class='line'>adduser film
</span><span class='line'>
</span><span class='line'><span class="c"># Add user film to group video</span>
</span><span class='line'>adduser film video
</span><span class='line'>
</span><span class='line'><span class="nv">wine_compholio_dep</span><span class="o">=(</span><span class="s1">&#39;lib32-fontconfig&#39;</span>
</span><span class='line'>           <span class="s1">&#39;lib32-libxcursor&#39;</span>
</span><span class='line'>           <span class="s1">&#39;lib32-libxrandr&#39;</span>
</span><span class='line'>           <span class="s1">&#39;lib32-libxdamage&#39;</span>
</span><span class='line'>           <span class="s1">&#39;lib32-libxi&#39;</span>
</span><span class='line'>           <span class="s1">&#39;lib32-gettext&#39;</span>
</span><span class='line'>           <span class="s1">&#39;lib32-glu&#39;</span>
</span><span class='line'>           <span class="s1">&#39;lib32-libsm&#39;</span>
</span><span class='line'>           <span class="s1">&#39;lib32-gcc-libs&#39;</span>
</span><span class='line'>           <span class="s1">&#39;lib32-attr&#39;</span>
</span><span class='line'>           <span class="s1">&#39;desktop-file-utils&#39;</span><span class="o">)</span>
</span><span class='line'>
</span><span class='line'><span class="nv">wine_compholio_dev</span><span class="o">=(</span><span class="s1">&#39;autoconf&#39;</span>
</span><span class='line'>	<span class="s1">&#39;ncurses&#39;</span>
</span><span class='line'>	<span class="s1">&#39;bison&#39;</span>
</span><span class='line'>	<span class="s1">&#39;perl&#39;</span>
</span><span class='line'>	<span class="s1">&#39;fontforge&#39;</span>
</span><span class='line'>	<span class="s1">&#39;flex&#39;</span>
</span><span class='line'>	<span class="s1">&#39;prelink&#39;</span>
</span><span class='line'>	<span class="s1">&#39;gcc-multilib&gt;=4.5.0-2&#39;</span>
</span><span class='line'>	<span class="s1">&#39;lib32-giflib&#39;</span>
</span><span class='line'>	<span class="s1">&#39;lib32-libpng&#39;</span>
</span><span class='line'>	<span class="s1">&#39;lib32-gnutls&#39;</span>
</span><span class='line'>	<span class="s1">&#39;lib32-libxinerama&#39;</span>
</span><span class='line'>	<span class="s1">&#39;lib32-libxcomposite&#39;</span>
</span><span class='line'>	<span class="s1">&#39;lib32-libxmu&#39;</span>
</span><span class='line'>	<span class="s1">&#39;lib32-libxxf86vm&#39;</span>
</span><span class='line'>	<span class="s1">&#39;lib32-libxml2&#39;</span>
</span><span class='line'>	<span class="s1">&#39;lib32-libldap&#39;</span>
</span><span class='line'>	<span class="s1">&#39;lib32-lcms&#39;</span>
</span><span class='line'>	<span class="s1">&#39;lib32-mpg123&#39;</span>
</span><span class='line'>	<span class="s1">&#39;lib32-openal&#39;</span>
</span><span class='line'>	<span class="s1">&#39;lib32-v4l-utils&#39;</span>
</span><span class='line'>	<span class="s1">&#39;lib32-alsa-lib&#39;</span>
</span><span class='line'>	<span class="s1">&#39;lib32-mesa&#39;</span>
</span><span class='line'>	<span class="s1">&#39;lib32-libgl&#39;</span>
</span><span class='line'>	<span class="s1">&#39;lib32-libcl&#39;</span>
</span><span class='line'>	<span class="s1">&#39;attr&#39;</span>
</span><span class='line'>	<span class="s1">&#39;samba&#39;</span>
</span><span class='line'>	<span class="s1">&#39;pulseaudio&#39;</span>
</span><span class='line'>	<span class="s1">&#39;opencl-headers&#39;</span><span class="o">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Application dependencies. </span>
</span><span class='line'><span class="c"># (Instead of &#39;zenity&#39; you can use: &#39;kde-baseapps-bin&#39; AND &#39;qdbus&#39;.)</span>
</span><span class='line'><span class="nv">pipelight_dep</span><span class="o">=(</span><span class="s1">&#39;libc6&#39;</span>
</span><span class='line'>	<span class="s1">&#39;libgcc1&#39;</span>
</span><span class='line'>	<span class="s1">&#39;libstdc++6&#39;</span>
</span><span class='line'>	<span class="s1">&#39;libx11-6&#39;</span>
</span><span class='line'>	<span class="s1">&#39;debconf&#39;</span>
</span><span class='line'>	<span class="s1">&#39;mesa-utils&#39;</span>
</span><span class='line'>	<span class="s1">&#39;ttf-mscorefonts-installer&#39;</span>
</span><span class='line'>	<span class="s1">&#39;wget&#39;</span>
</span><span class='line'>	<span class="s1">&#39;zenity&#39;</span>
</span><span class='line'>	<span class="s1">&#39;bash&#39;</span>
</span><span class='line'>	<span class="s1">&#39;unzip&#39;</span>
</span><span class='line'>	<span class="s1">&#39;cabextract&#39;</span>
</span><span class='line'>	<span class="s1">&#39;gnupg&#39;</span><span class="o">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Development dependencies.</span>
</span><span class='line'><span class="nv">pipelight_dev</span><span class="o">=(</span><span class="s1">&#39;libc6-dev&#39;</span>
</span><span class='line'>	<span class="s1">&#39;libx11-dev&#39;</span>
</span><span class='line'>	<span class="s1">&#39;mingw-w64&#39;</span>
</span><span class='line'>	<span class="s1">&#39;g++-mingw-w64&#39;</span>
</span><span class='line'>	<span class="s1">&#39;make&#39;</span>
</span><span class='line'>	<span class="s1">&#39;g++&#39;</span>
</span><span class='line'>	<span class="s1">&#39;sed&#39;</span>
</span><span class='line'><span class="o">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>aptitude install <span class="k">${</span><span class="nv">wine_compholio_dep</span><span class="k">}</span> <span class="k">${</span><span class="nv">wine_compholio_dev</span><span class="k">}</span> <span class="k">${</span><span class="nv">pipelight_dep</span><span class="k">}</span> <span class="k">${</span><span class="nv">pipelight_dev</span><span class="k">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c"># XATTR support</span>
</span><span class='line'><span class="c"># XATTR is for ext3 and ext4 enabled out of the box.</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># # Install the attr package (example for Ubuntu/Debian):</span>
</span><span class='line'><span class="c"># aptitude install attr</span>
</span><span class='line'><span class="c"># # Check XATTR</span>
</span><span class='line'><span class="c"># touch ~/.xattr_test &amp;&amp; setfattr -n &#39;user.testAttr&#39; -v &#39;attribute value&#39; ~/.xattr_test &amp;&gt; /dev/null; getfattr ~/.xattr_test 2&gt;&amp;1 | grep -q user.testAttr &amp;&amp; echo &#39;It works!&#39; || echo &#39;No workie!&#39;; rm ~/.xattr_test &amp;&gt; /dev/null</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Root things are done.</span>
</span></code></pre></td></tr></table></div></figure></p>

<pre><code># Root things are done.
exit

# Make your home directory readable only by yourself.
chmod 0700 ${HOME}
</code></pre>

<h2>Konfigurieren und Kompilieren</h2>

<p>Als Benutzer &ldquo;Film&rdquo; anmelden und das Script ausfÃ¼hren.</p>

<pre><code>wget https://leitstelle.github.io/downloads/code/2014/pipelight-install.sh
chmod +x pipelight-install.sh
./pipelight-install.sh
</code></pre>

<p><figure class='code'><figcaption><span>Compile pipelight and enable silverlight. (pipelight-install.sh)</span> <a href='/downloads/code/2014/pipelight-install.sh'>download</a></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'><span class="nv">USER_HOME</span><span class="o">=</span><span class="k">${</span><span class="nv">HOME</span><span class="k">}</span>
</span><span class='line'><span class="nv">USER_INSTALL_ROOT</span><span class="o">=</span><span class="k">${</span><span class="nv">USER_HOME</span><span class="k">}</span>/.local/build
</span><span class='line'><span class="nv">USER_PIPELIGHT_LIB_DIR</span><span class="o">=</span><span class="k">${</span><span class="nv">USER_INSTALL_ROOT</span><span class="k">}</span>/lib/pipelight
</span><span class='line'>
</span><span class='line'><span class="c"># Prepare enviroment.</span>
</span><span class='line'>mkdir -p <span class="k">${</span><span class="nv">USER_INSTALL_ROOT</span><span class="k">}</span>/src
</span><span class='line'><span class="nb">cd</span> <span class="k">${</span><span class="nv">USER_INSTALL_ROOT</span><span class="k">}</span>/src
</span><span class='line'>git clone https://bitbucket.org/mmueller2012/pipelight.git
</span><span class='line'>
</span><span class='line'><span class="c"># Configure pipelight and build it.</span>
</span><span class='line'><span class="nb">cd </span>pipelight
</span><span class='line'>
</span><span class='line'>./configure --prefix<span class="o">=</span><span class="k">${</span><span class="nv">USER_INSTALL_ROOT</span><span class="k">}</span> --moz-plugin-path<span class="o">=</span><span class="k">${</span><span class="nv">USER_HOME</span><span class="k">}</span>/.mozilla/plugins/
</span><span class='line'><span class="c"># --wine-path=&quot;/opt/wine-compholio/bin/wine&quot; --gcc-runtime-dlls=&quot;/lib/x86_64-linux-gnu/&quot;</span>
</span><span class='line'>
</span><span class='line'>make
</span><span class='line'>make install
</span><span class='line'>
</span><span class='line'><span class="c"># Postinstall. Copy &#39;libpipelight.so&#39; to available plugins. Yes, this works like that.</span>
</span><span class='line'>cp <span class="k">${</span><span class="nv">USER_PIPELIGHT_LIB_DIR</span><span class="k">}</span>/libpipelight.so <span class="k">${</span><span class="nv">USER_PIPELIGHT_LIB_DIR</span><span class="k">}</span>/libpipelight-flash.so
</span><span class='line'>cp <span class="k">${</span><span class="nv">USER_PIPELIGHT_LIB_DIR</span><span class="k">}</span>/libpipelight.so <span class="k">${</span><span class="nv">USER_PIPELIGHT_LIB_DIR</span><span class="k">}</span>/libpipelight-silverlight4.so
</span><span class='line'>cp <span class="k">${</span><span class="nv">USER_PIPELIGHT_LIB_DIR</span><span class="k">}</span>/libpipelight.so <span class="k">${</span><span class="nv">USER_PIPELIGHT_LIB_DIR</span><span class="k">}</span>/libpipelight-silverlight5.0.so
</span><span class='line'>cp <span class="k">${</span><span class="nv">USER_PIPELIGHT_LIB_DIR</span><span class="k">}</span>/libpipelight.so <span class="k">${</span><span class="nv">USER_PIPELIGHT_LIB_DIR</span><span class="k">}</span>/libpipelight-silverlight5.1.so
</span><span class='line'>cp <span class="k">${</span><span class="nv">USER_PIPELIGHT_LIB_DIR</span><span class="k">}</span>/libpipelight.so <span class="k">${</span><span class="nv">USER_PIPELIGHT_LIB_DIR</span><span class="k">}</span>/libpipelight-unity3d.so
</span><span class='line'>cp <span class="k">${</span><span class="nv">USER_PIPELIGHT_LIB_DIR</span><span class="k">}</span>/libpipelight.so <span class="k">${</span><span class="nv">USER_PIPELIGHT_LIB_DIR</span><span class="k">}</span>/libpipelight-widevine.so
</span><span class='line'>
</span><span class='line'><span class="c"># Postinstall. Create link from &#39;~/bin/pipelight-plugin&#39; to &#39;~/.locale/usr/bin/pipelight-plugin&#39;.</span>
</span><span class='line'><span class="c"># Need &#39;$HOME/bin&#39; in PATH. If this is not configured, configure it. ;-)</span>
</span><span class='line'><span class="c"># mkdir -p ${USER_HOME}/bin</span>
</span><span class='line'><span class="c"># cat &lt;&lt;EOF &gt;&gt; ${USER_HOME}/.bash_profile</span>
</span><span class='line'><span class="c"># # if running bash</span>
</span><span class='line'><span class="c"># if [ -n &quot;$BASH_VERSION&quot; ]; then</span>
</span><span class='line'><span class="c">#     # include .bashrc if it exists</span>
</span><span class='line'><span class="c">#     if [ -f &quot;$HOME/.bashrc&quot; ]; then</span>
</span><span class='line'><span class="c">#         . &quot;$HOME/.bashrc</span>
</span><span class='line'><span class="c">#     fi</span>
</span><span class='line'><span class="c"># fi</span>
</span><span class='line'><span class="c"># # set PATH so it includes user&#39;s private bin if it exists</span>
</span><span class='line'><span class="c"># if [ -d &quot;$HOME/bin&quot; ] ; then</span>
</span><span class='line'><span class="c">#     PATH=&quot;$HOME/bin:$PATH&quot;</span>
</span><span class='line'><span class="c"># fi</span>
</span><span class='line'><span class="c"># EOF</span>
</span><span class='line'><span class="c"># bash -l</span>
</span><span class='line'><span class="c"># TODO: Write small bash profile help.</span>
</span><span class='line'>ln -s <span class="k">${</span><span class="nv">USER_INSTALL_ROOT</span><span class="k">}</span>/bin/pipelight-plugin <span class="k">${</span><span class="nv">USER_HOME</span><span class="k">}</span>/bin/pipelight-plugin
</span><span class='line'>
</span><span class='line'><span class="c"># Start Browser. On first run firefox detects a new plugin.</span>
</span><span class='line'><span class="c"># This initalize a new wine bottle and install the plugins.</span>
</span><span class='line'>pipelight-plugin --enable silverlight
</span></code></pre></td></tr></table></div></figure></p>

<pre><code># Start firefox / iceweasel.
iceweasel
</code></pre>

<p>Zum Schluss muss noch ein Firefox-Addon installiert werden, welches es erlaubt, sich als Browser eines anderen Betriebssystems auszugeben. Damit wird den Streamingseiten suggeriert, man wÃ¤re ein Windows-Benutzer und kÃ¶nne Filme Ã¼ber &ldquo;Silverlight&rdquo; streamen. Dazu eignet sich z.B. &ldquo;<a href="https://addons.mozilla.org/firefox/addon/user-agent-overrider/">User Agent Overrider</a>&rdquo;. NatÃ¼rlich muss man auch &ldquo;Windows / Firefox 26&rdquo; auswÃ¤hlen (Das neue Icon oben rechts klicken.).</p>
]]></content>
  </entry>
  
</feed>
